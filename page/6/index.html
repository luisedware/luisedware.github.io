<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>七月十五九月初七</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="七月十五九月初七">
<meta property="og:url" content="http://luisedware.github.io/page/6/index.html">
<meta property="og:site_name" content="七月十五九月初七">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="七月十五九月初七">
  
    <link rel="alternate" href="/atom.xml" title="七月十五九月初七" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">七月十五九月初七</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一两祝你手边多银财，二两祝你方寸永不乱</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://luisedware.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Linux-Shell-实战" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/03/Linux-Shell-实战/" class="article-date">
  <time datetime="2016-10-03T08:11:54.000Z" itemprop="datePublished">2016-10-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/03/Linux-Shell-实战/">Linux Shell 实战</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="monitor-man-sh"><a href="#monitor-man-sh" class="headerlink" title="monitor_man.sh"></a>monitor_man.sh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">resettem=$(tput sgr0)</div><div class="line">declare -A ssharray</div><div class="line">i=0</div><div class="line">numbers=&quot;&quot;</div><div class="line"></div><div class="line">for script_file in `ls -I &quot;monitor_man.sh&quot; ./`</div><div class="line">do</div><div class="line">  echo -e &quot;\e[1;35m&quot; &quot;The Script:&quot; $&#123;i&#125; &apos;==&gt;&apos; $&#123;resettem&#125; $&#123;script_file&#125;</div><div class="line">  ssharray[$i]=$&#123;script_file&#125;</div><div class="line">  numbers=&quot;$&#123;numbers&#125; | $&#123;i&#125;&quot;</div><div class="line"></div><div class="line">  i=$((i+1))</div><div class="line">done</div><div class="line"></div><div class="line">while true</div><div class="line">do</div><div class="line">  read -p &quot;Please input a number [ $&#123;numbers&#125; ]:&quot; execshell</div><div class="line">  if [[ ! $&#123;execshell&#125; =~ ^[0-9]+ ]];then</div><div class="line">        exit 0</div><div class="line">  fi</div><div class="line">done</div></pre></td></tr></table></figure>
<h2 id="system-monitor-sh"><a href="#system-monitor-sh" class="headerlink" title="system_monitor.sh"></a>system_monitor.sh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">clear</div><div class="line"></div><div class="line">if [[ $# -eq 0 ]]</div><div class="line">then</div><div class="line"></div><div class="line"># Define Variable reset_terminal</div><div class="line">reset_terminal=$(tput sgr0)</div><div class="line"></div><div class="line"># Check OS Type</div><div class="line">os=$(uname -o)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check OS Type&quot; $reset_terminal $os</div><div class="line"></div><div class="line"># Check OS Release Version and Name</div><div class="line">os_name=$(cat /etc/issue|grep -e &quot;Server&quot;)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check OS Release Version and Name&quot; $reset_terminal $os_name</div><div class="line"></div><div class="line"># Check Architecture</div><div class="line">architecture=$(uname -m)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check Architecture&quot; $reset_terminal $architecture</div><div class="line"></div><div class="line"># Check Kernel Release</div><div class="line">kernel_release=$(uname -r)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check Kernel Release&quot; $reset_terminal $kernel_release</div><div class="line"></div><div class="line"># Check Hostname $HOSTNAME</div><div class="line">host_name=$(uname -n)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check Hostname&quot; $reset_terminal $host_name</div><div class="line"></div><div class="line"># Check Internal IP</div><div class="line">internal_ip=$(hostname -I)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check Internal IP&quot; $reset_terminal $internal_ip</div><div class="line"></div><div class="line"># Check External IP</div><div class="line">external_ip=$(curl -s http://ipecho.net/plain)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check External IP&quot; $reset_terminal $external_ip</div><div class="line"></div><div class="line"># Check DNS</div><div class="line">name_servers=$(cat /etc/resolv.conf | grep -E &quot;\&lt;nameserver[ ]+&quot; | awk &apos;&#123;print $NF&#125;&apos;)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check DNS&quot; $reset_terminal $name_servers</div><div class="line"></div><div class="line"># Check if connected to Internet or not</div><div class="line">ping -c 2 baidu.com &amp;&gt; /dev/null &amp;&amp; echo &quot;Internet:Connected&quot; || echo &quot;Internet:Disconnected&quot;</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Check if connected to Internet or not&quot; $reset_terminal $ping</div><div class="line"></div><div class="line"># Check Logged In Users</div><div class="line">who&gt;/tmp/who</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Logged In Users&quot; &amp;&amp; cat /tmp/who</div><div class="line">rm -f /tmp/who</div><div class="line"></div><div class="line"># Check System Memory Usages</div><div class="line">system_men_usages=$(awk &apos;/MemTotal/&#123;total=$2&#125;/MemFree/&#123;free=$2&#125;END&#123;print (total-free)/1024&#125;&apos; /proc/meminfo)</div><div class="line">apps_mem_usages=$(awk &apos;/MemTotal/&#123;total=$2&#125;/MemFree/&#123;free=$2&#125;/^Cached/&#123;cached=$2&#125;/Buffers/&#123;buffers=$2&#125;END&#123;print (total-free-cached-buffers)/1024&#125;&apos; /proc/meminfo)</div><div class="line"></div><div class="line">echo -e &apos;\E[32m&apos; &quot;System Memuserages&quot; $reset_terminal $system_men_usages</div><div class="line">echo -e &apos;\E[32m&apos; &quot;Apps Memuserages&quot; $reset_terminal $apps_mem_usages</div><div class="line"></div><div class="line">load_average=$(top -n 1 -b | grep &quot;load average:&quot; | awk &apos;&#123;print $12 $13 $14&#125;&apos;)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;load averages&quot; $reset_terminal $load_average</div><div class="line"></div><div class="line">disk_average=$(df -hP | grep -vE &apos;Filesystem|tmpfs&apos; | awk &apos;&#123;print $1 &quot; &quot; $5&#125;&apos;)</div><div class="line">echo -e &apos;\E[32m&apos; &quot;disk averages&quot; $reset_terminal $disk_average</div><div class="line"></div><div class="line">fi</div></pre></td></tr></table></figure>
<h2 id="check-server-sh"><a href="#check-server-sh" class="headerlink" title="check_server_sh"></a>check_server_sh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">resettem=$(tput sgr0)</div><div class="line"></div><div class="line">nginx_server=&apos;http://10.170.22.217&apos;</div><div class="line"></div><div class="line">check_nginx_server()</div><div class="line">&#123;</div><div class="line">	status_code=curl -m 5 -s -w %&#123;http_code&#125; $&#123;nginx_server&#125; -o /dev/null</div><div class="line"></div><div class="line">	if [ $status_code -eq 000 -o $status_code -ge 500 ];then</div><div class="line">		echo -e &apos;\E[32m&apos; &quot;Check http server error! Response status code is &quot; $resettem $status_code</div><div class="line">	else</div><div class="line">		http_content=$(curl -s $&#123;nginx_server&#125;)</div><div class="line">		echo -e &apos;\E[32m&apos; &quot;Check http server ok! \n&quot; $resettem $http_content</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">check_nginx_server</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/10/03/Linux-Shell-实战/" data-id="cj4i1olqt000m0y4bmn1h0qgu" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-权限管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/30/Linux-权限管理/" class="article-date">
  <time datetime="2016-09-30T06:24:23.000Z" itemprop="datePublished">2016-09-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/30/Linux-权限管理/">Linux 权限管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="基本权限"><a href="#基本权限" class="headerlink" title="基本权限"></a>基本权限</h2><ul>
<li><code>drwxrw-r--</code><ul>
<li>d 文件类型</li>
<li>r 读</li>
<li>w 写</li>
<li>x 执行</li>
<li>rwx 代表所有者权限</li>
<li>rw- 代表所属组权限</li>
<li>r– 代表其他人权限</li>
</ul>
</li>
<li>权限作用<ul>
<li>权限对文件的作用：<ul>
<li>r 读取文件内容</li>
<li>w 编辑、新增、修改文件内容，但是不能删除文件</li>
<li>x 可执行</li>
</ul>
</li>
<li>权限对目录的作用：<ul>
<li>r 可以查询目录下文件名（ls）</li>
<li>w 具有修改目录结构的权限。如新建文件和目录，删除此目录下文件和目录，重命名此目录下文件和目录，剪切（touch rm mv cp）</li>
<li>x 可以进入目录（cd）</li>
</ul>
</li>
<li>区别：<ul>
<li>对文件来讲，最高权限是 x</li>
<li>对目录来讲，最高权限是 w</li>
</ul>
</li>
</ul>
</li>
<li>权限命令<ul>
<li>chmod</li>
<li><code>chmod [选项] 模式 文件名</code><ul>
<li>选项：<ul>
<li>-R 递归</li>
</ul>
</li>
<li>模式：<ul>
<li><code>[ugoa] [+.=] [rwx]</code></li>
<li><code>[mode=421]</code></li>
</ul>
</li>
<li>例子：<ul>
<li><code>chmod u+x cangls.av</code></li>
<li><code>chmod a=rwx fengjie.av</code></li>
<li><code>chmod g+w,o+w furong.av</code></li>
</ul>
</li>
<li>权限的数字表示<ul>
<li>r 4</li>
<li>w 2</li>
<li>x 1</li>
</ul>
</li>
</ul>
</li>
<li>chgrp<ul>
<li><code>chgrp 组名 文件名</code> 修改文件的所属组</li>
</ul>
</li>
<li>chown<ul>
<li><code>chown 用户名 文件名</code> 修改文件的所有者</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="默认权限"><a href="#默认权限" class="headerlink" title="默认权限"></a>默认权限</h2><ul>
<li>umask 查看默认权限<ul>
<li>0022<ul>
<li>第一位 0：文件特殊权限</li>
<li>022：文件默认权限</li>
</ul>
</li>
</ul>
</li>
<li>修改 umask 值<ul>
<li>临时修改<ul>
<li>umask 0002</li>
</ul>
</li>
<li>永久修改<ul>
<li>vim /etc/profile</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>文件的默认权限特点</p>
<ul>
<li>文件默认不能建立为执行文件，必须手工赋予执行权限</li>
<li>文件默认权限最大为 666</li>
<li>默认权限需要换算成字母再相减</li>
<li>建立文件之后的默认权限，为 666 减去 umask 值<ul>
<li>例子：<ul>
<li>文件默认最大权限 666，umask 值 022</li>
<li><code>-rw-rw-rw- 减去 -----w--w- 等于 -rw-r--r--</code>，结果为 644</li>
<li><code>-rw-rw-rw- 键入 -----wx-wx 等于 -rw-r--r--</code>，结果为 644</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>目录的默认权限特点</p>
<ul>
<li>目录默认权限最大为 777</li>
<li>默认权限需要换算成字母再相减</li>
<li>建立文件之后的默认权限，为 777 减去 umask 值<ul>
<li>例子：<ul>
<li>目录默认最大权限为 777，umask 值 022</li>
<li><code>-rwxrwxrwx 减去 -----w--w- 等于 -rwxr-xr-x</code>，结果为 755</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/30/Linux-权限管理/" data-id="cj4i1olr600100y4baovmp17q" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-软件安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/27/Linux-软件安装/" class="article-date">
  <time datetime="2016-09-27T14:29:56.000Z" itemprop="datePublished">2016-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/27/Linux-软件安装/">Linux 软件安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="软件包管理简介"><a href="#软件包管理简介" class="headerlink" title="软件包管理简介"></a>软件包管理简介</h2><ul>
<li>软件包分类<ul>
<li>源码包<ul>
<li>优点：<ul>
<li>开源，如果有足够的能力，可以修改代码</li>
<li>可以自由选择所需的功能</li>
<li>软件是编译安装，所以更加适合自己的系统，更加稳定也效率更高</li>
<li>卸载方便</li>
</ul>
</li>
<li>缺点：<ul>
<li>安装步骤较多，尤其安装较大的软件集合时，容易出现拼写错误</li>
<li>编译过程时间较长，安装比二进制安装时间长</li>
<li>编译安装一旦报错，新手很难解决安装错误</li>
</ul>
</li>
</ul>
</li>
<li>二进制包（RPM 包、系统默认包）<ul>
<li>优点：<ul>
<li>包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询和卸载</li>
<li>安装速度比源码包安装快得多</li>
</ul>
</li>
<li>缺点：<ul>
<li>经过编译，不再可以看到源代码</li>
<li>功能选择不如源码包灵活</li>
<li>依赖性</li>
</ul>
</li>
</ul>
</li>
<li>脚本安装包（本质是源码包和二进制包）<ul>
<li>优点：安装简单、快捷</li>
<li>缺点：完全丧失了自定义性</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="RPM-命令管理"><a href="#RPM-命令管理" class="headerlink" title="RPM 命令管理"></a>RPM 命令管理</h2><h3 id="RPM-包命令规则"><a href="#RPM-包命令规则" class="headerlink" title="RPM 包命令规则"></a>RPM 包命令规则</h3><ul>
<li><code>httpd-2.2.15-15.el6.centos.1.i686.rpm</code><ul>
<li>httpd：软件包名</li>
<li>2.2.15：软件版本</li>
<li>15：软件发布的次数</li>
<li>el6.centos：适合的 Linux 平台</li>
<li>i686：适合的硬件平台</li>
<li>rpm：rpm 包扩展名</li>
</ul>
</li>
</ul>
<p>RPM 包依赖性</p>
<ul>
<li>树形依赖：a-&gt;b-&gt;c</li>
<li>环形依赖：a-&gt;b-&gt;c-&gt;a</li>
<li>模块依赖：查询网站：www.rpmfind.net</li>
</ul>
<h3 id="RPM-安装命令"><a href="#RPM-安装命令" class="headerlink" title="RPM 安装命令"></a>RPM 安装命令</h3><p>包全名与包名</p>
<ul>
<li>包全名：操作的包是没有安装的软件包时，使用包全名。而且要注意路径。</li>
<li>包名：操作已经安装的软件包时，使用包名，是搜索 /var/lib/rpm/ 中的数据库</li>
</ul>
<p>RPM 包安装</p>
<ul>
<li>安装<ul>
<li><code>rpm [选项] 包全名</code><ul>
<li>选项：<ul>
<li>-i（install）安装</li>
<li>-v（verbose）显示详细信息</li>
<li>-h（hash）显示进度</li>
<li>--nodeps 不检测依赖性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>升级<ul>
<li><code>rpm -Uvh  包全名</code><ul>
<li>选项：<ul>
<li>-U 升级</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>卸载<ul>
<li><code>rpm -e 包名</code><ul>
<li>选项：<ul>
<li>-e 卸载</li>
<li>–nodeps 不检查依赖性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>查询<ul>
<li><code>rpm -qa</code> 查询所有已经安装的 RPM 包</li>
<li><code>rpm -q 包名</code> 查询包是否安装</li>
<li><code>rpm -qi 包名</code> 查询软件包详细信息</li>
<li><code>rpm -ql 包名</code> 查询包中文件安装位置<ul>
<li>RPM 包默认安装路径<ul>
<li>/etc 配置文件安装目录</li>
<li>/usr/bin 可执行命令安装目录</li>
<li>/usr/lib 程序所使用的函数库保存位置</li>
<li>/usr/share/doc 基本的软件使用手册保存位置</li>
<li>/usr/share/man/ 帮助文件保存位置</li>
</ul>
</li>
</ul>
</li>
<li><code>rpm -qf 系统文件名</code><ul>
<li>选项：<ul>
<li>-f 查询系统文件属于哪个软件包（file）</li>
</ul>
</li>
</ul>
</li>
<li><code>rpm -qR 包名</code><ul>
<li>选项：<ul>
<li>-R 查询软件包的依赖性</li>
<li>-p 查询未安装包信息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Yum-命令管理"><a href="#Yum-命令管理" class="headerlink" title="Yum 命令管理"></a>Yum 命令管理</h2><ul>
<li>查询<ul>
<li><code>yum list</code> 查询所有可用软件包列表</li>
<li><code>yum search 关键字</code> 搜索服务器上所有和关键字相关的包</li>
</ul>
</li>
<li>安装<ul>
<li><code>yum -y install 包名</code><ul>
<li>选项：<ul>
<li>install 安装</li>
<li>-y 自动回答 yes</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>升级<ul>
<li><code>yum -y update 包名</code><ul>
<li>选项：<ul>
<li>update 升级</li>
<li>-y 自动回答 yes</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>卸载<ul>
<li><code>yum -y remove 包名</code><ul>
<li>选项：<ul>
<li>remove 卸载</li>
<li>-y 自动回答 yes</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>组管理<ul>
<li><code>yum grouplist</code> 列出所有可用的软件组列表</li>
<li><code>yum groupinstall 软件组名</code> 安装指定软件组，组名可以由 grouplist 查询出来</li>
<li><code>yum groupremove 软件组名</code> 卸载指定软件组</li>
</ul>
</li>
</ul>
<h2 id="源码包安装"><a href="#源码包安装" class="headerlink" title="源码包安装"></a>源码包安装</h2><p>源码包安装位置需要手动指定，一般安装在 <code>/usr/local/软件名</code></p>
<p>安装源码包之前需要安装 C 语言编译器</p>
<p>源码包安装过程</p>
<ul>
<li>下载源码包</li>
<li>解压缩下载的源码包</li>
<li>进入解压缩目录</li>
<li><code>./configure 软件配置与检查</code><ul>
<li>定义需要的功能选项</li>
<li>检测系统环境是否符合安装要求</li>
<li>把定义好的功能选项和检测系统环境的信息都写入 Makefile 文件，用于后续的编辑</li>
</ul>
</li>
<li><code>make</code> 编译<ul>
<li><code>make clean</code> 如果编译错误，尝试执行 <code>make clean</code></li>
</ul>
</li>
<li><code>make install</code> 编译安装</li>
</ul>
<p>源码包不需要卸载命令，直接删除安装目录即可。不会遗留垃圾文件</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/27/Linux-软件安装/" data-id="cj4i1olrg00180y4btb2eovxu" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-定时任务" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/26/Linux-定时任务/" class="article-date">
  <time datetime="2016-09-26T09:25:18.000Z" itemprop="datePublished">2016-09-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/26/Linux-定时任务/">Linux 定时任务</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Linux-定时任务"><a href="#Linux-定时任务" class="headerlink" title="Linux 定时任务"></a>Linux 定时任务</h2><ul>
<li>at 一次性定时任务</li>
<li>crontab 循环定时任务</li>
<li>crontab 设置</li>
<li>anacron 配置</li>
</ul>
<h2 id="at-一次性定时任务"><a href="#at-一次性定时任务" class="headerlink" title="at 一次性定时任务"></a>at 一次性定时任务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># at 服务是否安装</div><div class="line">chkconfig --list | grep atd</div><div class="line"></div><div class="line"># at 服务的启动</div><div class="line">service atd restart</div></pre></td></tr></table></figure>
<p>at 的访问控制</p>
<ul>
<li>如果系统中有 /etc/at.allow 文件，那么只有写入 /etc/at.allow （白名单）文件中的用户可以使用 at 命令（/etc/at.deny 文件会被忽略）</li>
<li>如果系统中没有 /etc/at.allow 文件，只有 /etc/at.deny 文件，那么写入 /etc/at.deny （黑名单）文件中的用户不能使用 at 命令。对 root 不起作用</li>
<li>如果系统中这两个文件都不存在，那么只有 root 用户可以使用 at 命令</li>
</ul>
<p>at 命令</p>
<ul>
<li>at<ul>
<li><code>at [选项] 时间</code><ul>
<li>选项：<ul>
<li>-m 当 at 工作完成后，无论命令是否有输出，都用 email 通知执行 at 命令的用户</li>
<li>-c 工作号：显示该 at 工作的实际内容</li>
</ul>
</li>
<li>时间：<ul>
<li>HH:MM 02:30</li>
<li>HH:MM YYYY-MM-DD 02:30 2013-07-25</li>
<li>HH:MM[am|pm] [month] [date] 02:30 July 25</li>
<li>HH:MM[am|pm] + [minutes|hours|days|weeks] now + 5 minutes</li>
</ul>
</li>
<li>例子：<ul>
<li><code>at now + 2 minutes</code> &amp;&amp; <code>/root/hello.sh &gt;&gt; /root/hello.log</code></li>
<li><code>at 02:00 2013-07-26</code> &amp;&amp; <code>/bin/sync</code> &amp;&amp; <code>/sbin/shutdown -r now</code></li>
</ul>
</li>
<li>其他：<ul>
<li><code>atq</code> 查询当前服务器上的 at 工作</li>
<li><code>atrm [工作号]</code> 删除指定的 at 任务</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="anncron"><a href="#anncron" class="headerlink" title="anncron"></a>anncron</h2><p>anacron 是用来保证在系统关机的时候错过的定时任务，可以在系统开机之后再执行</p>
<p>anacron 检测周期</p>
<ul>
<li>anacron 会使用一天，七天，一个月作为检测周期</li>
<li>在系统的 /var/spool/anacron/ 目录中存在 cron.{daily，weekly，monthly} 文件，用于记录上次执行的 cron 的时间</li>
<li>和当前时间做比较，如果两个时间的差值超过了 anacron 的指定时间差值，证明有 cron 任务被漏执行</li>
</ul>
<p>anacron 配置文件</p>
<ul>
<li>vim /etc/anacrontab<ul>
<li><code>RANDOM_DELAY=45</code> 最大随机延迟</li>
<li><code>START_HOURS_RANGE=3-22</code> anacron 的执行时间范围是 3:00 - 22:00</li>
<li><code>1    5    cron.daily         nice run-parts /etc/cron.daily</code> 天数 强制延迟（分钟） 工作名称 实际执行的命令</li>
</ul>
</li>
</ul>
<p>anacron 执行过程（以 cron.daily 为例）</p>
<ul>
<li>首先读取 /var/spool/anacron/cron.daily 中的上一次 anacron 执行的时间</li>
<li>和当前时间比较，如果两个时间的差值超过 1 天，就执行 cron.daily 工作</li>
<li>执行这个工作只能在 03:00-22:00 之间</li>
<li>执行工作时强制延迟时间为 5 分钟，再随机延迟 0-45 分钟时间</li>
<li>使用 nice 命令指定默认优先级，使用 run-parts 脚本执行 /etc/cron.daily 目录中的所有可执行文件</li>
</ul>
<h2 id="Crontab-简介"><a href="#Crontab-简介" class="headerlink" title="Crontab 简介"></a>Crontab 简介</h2><p>业务场景</p>
<ul>
<li>每分钟需要执行一个程序检查系统运行状态</li>
<li>每天凌晨需要对过去一天的业务数据进行统计</li>
<li>每个星期需要把日志文件备份</li>
<li>每个月需要把数据库进行备份</li>
</ul>
<p>概念理解</p>
<p><strong>Crontab 是一个用于设置周期性被执行的任务的工具。</strong></p>
<h2 id="Crontab-实践"><a href="#Crontab-实践" class="headerlink" title="Crontab 实践"></a>Crontab 实践</h2><ul>
<li>相关工具<ul>
<li>Mac OS 自带 SSH</li>
</ul>
</li>
<li>安装并检查 Crontab 服务<ul>
<li>检查 cron 服务<ul>
<li>检查 Crontab 工具是否安装：<code>crontab -l</code></li>
<li>检查 Crontab 可执行的命令：<code>service crond</code></li>
<li>检查 Crontab 服务是否启动：<code>service crond status</code></li>
<li>删除当前用户所有的定时任务： <code>crontab -r</code></li>
<li>打开定时任务列表，进行编辑：<code>crontab -e</code><ul>
<li>实际上在修改目录 <code>/var/spool/cron/root</code> 下用户对应的文件</li>
<li><code>crontab 文件名</code> 会把（crontab -e）文件里的内容都覆盖，使用时需要注意</li>
</ul>
</li>
<li>启动 Crontab 服务：<code>service crond start</code></li>
</ul>
</li>
<li>安装 Crontab 服务（依次执行）<ul>
<li><code>yum install vixie-cron</code></li>
<li><code>yum install crontabs</code></li>
</ul>
</li>
<li><code>tail</code> 命令<ul>
<li>作用：按照要求将指定的文件的最后部分输出到标准设备，如果文件有更新，tail 会主动刷新，确保你看到最新的文件内容</li>
<li>选项<ul>
<li>-f 循环读取</li>
<li>-q 不显示处理信息</li>
<li>-v 显示详细的处理信息</li>
<li>-c [数目] 显示的字节数</li>
<li>-n [行数] 显示行数</li>
<li>-s 与-f合用,表示在每次反复的间隔休眠 s 秒</li>
<li>-q 从不输出给出文件名的首部</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Crontab 的基本组成<ul>
<li>配置文件</li>
<li>系统服务 Crond</li>
<li>配置工具 Crontab</li>
</ul>
</li>
<li>Crontab 的配置文件格式<ul>
<li><code>* * * * * Command</code><ul>
<li>第一个星号：分钟 0~59</li>
<li>第二个星号：小时 0~23</li>
<li>第三个星号：日期 1~31</li>
<li>第四个星号：月份 1~12</li>
<li>第五个星号：星期 0~7（0、7 都是星期天）</li>
</ul>
</li>
<li>用法：<ul>
<li>每晚的 21:30 重启 apache<ul>
<li><strong><code>30 21 * * * service httpd restart</code></strong></li>
</ul>
</li>
<li>每月 1 到 10 日的 4:45 重启 apache<ul>
<li><strong><code>45 4 1-10 * * service httpd restart</code></strong></li>
</ul>
</li>
<li>每月 1、10、22 日的 4:45 重启 apache<ul>
<li><strong><code>45 4 1,10,22 * * service httpd restart</code></strong></li>
</ul>
</li>
<li>每隔两分钟重启 apache 服务器<ul>
<li><strong><code>*/2 * * * * service httpd restart</code></strong></li>
</ul>
</li>
<li>晚上 11 点到早上 7 点之间，每隔一小时重启 apache<ul>
<li><strong><code>0 23-7/1 * * * service httpd restart</code></strong></li>
</ul>
</li>
<li>每天 18:00 至 23:00 之间每隔 30 分钟重启 apache<ul>
<li><strong><code>0,30 18-23 * * * service httpd restart</code></strong></li>
<li><strong><code>0-59/30 18-23 * * * service httpd restart</code></strong></li>
</ul>
</li>
</ul>
</li>
<li>总结：<ul>
<li>* 表示任何时候都匹配</li>
<li>可以用 “A,B,C” 表示 A 或者 B 或者 C 时执行命令</li>
<li>可以用 “A-B” 表示 A 到 B 之间时执行命令</li>
<li>可以用 “*/A” 表示每 A 时间执行一次命令</li>
</ul>
</li>
</ul>
</li>
<li>Crontab 配置文件<ul>
<li>全局配置文件<ul>
<li><code>/etc/crontab</code> 查看系统级别的 Crontab</li>
</ul>
</li>
<li>用户配置文件<ul>
<li><code>/var/spool/cron/用户名称</code> 查看用户级别的 Crontab</li>
</ul>
</li>
</ul>
</li>
<li>Crontab 的日志<ul>
<li>监听 Crontab 执行日志：<code>tail -f /var/log/cron</code>，可以看到用户级别和系统级别的 Crontab</li>
<li>查看每天的 Crontab 日志：<code>ls /var/log/cron*</code></li>
</ul>
</li>
<li>Crontab 常见错误<ul>
<li>环境变量：涉及到文件路径时写全局路径。注意声明 <code>#!/bin/bash</code> 确保脚本中环境变量能够被识别</li>
<li>第三和第五个域之间执行的是 “或” 操作<ul>
<li>四月的第一个星期日早晨 1 时 59 分运行 a.sh：<code>59 1 1-7 4 * test &#39;date + \%w -eq 0 &amp;&amp; /root/a.sh&#39;</code></li>
</ul>
</li>
<li>两个小时运行一次<ul>
<li>错误例子：<code>* 0,2,4,6,8,10,12,14,16,18,20,22 * * * date</code></li>
<li>正确例子：<code>0 */2 * * * date</code></li>
</ul>
</li>
</ul>
</li>
<li>Crontab 补充<ul>
<li>半分钟执行命令<ul>
<li><code>date &amp;&amp; sleep 0.5s &amp;&amp; date</code></li>
</ul>
</li>
<li>Crontab 最小时间是 1 分钟，控制 1 分钟执行多次，本应该是同时执行，但第二条被推迟了30s执行，效果就是1分钟执行了2次<ul>
<li><code>*/1 * * * * date &gt;&gt; /root/test/half.log</code></li>
<li><code>*/1 * * * * sleep 30s; date &gt;&gt; /root/test/half.log</code></li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/26/Linux-定时任务/" data-id="cj4i1olqz000u0y4bze7qyyox" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-系统管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/24/Linux-系统管理/" class="article-date">
  <time datetime="2016-09-24T01:01:11.000Z" itemprop="datePublished">2016-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/Linux-系统管理/">Linux 系统管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="进程简介"><a href="#进程简介" class="headerlink" title="进程简介"></a>进程简介</h2><p>进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源</p>
<h2 id="进程管理的作用"><a href="#进程管理的作用" class="headerlink" title="进程管理的作用"></a>进程管理的作用</h2><ul>
<li>判断服务器健康状态</li>
<li>查看系统中所有进程</li>
<li>杀死进程</li>
</ul>
<h2 id="进程的查看"><a href="#进程的查看" class="headerlink" title="进程的查看"></a>进程的查看</h2><ul>
<li><h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><ul>
<li><code>ps aux</code> 查看系统中所有进程，使用 BSD 操作系统格式</li>
<li><code>ps -le</code> 查看系统中所有进程，使用 Linux 标准命令模式</li>
<li>选项：<ul>
<li>a 显示一个终端的所有进程，除了会话引线</li>
<li>u 显示进程的归属用户及内存的使用情况</li>
<li>x 显示没有控制终端的进程</li>
<li>-l 长格式显示。显示更加详细的信息</li>
<li>-e 显示所有进程，和 -A 作用一致</li>
</ul>
</li>
<li>ps 命令输出<ul>
<li>USER 该进程是由哪个用户产生的</li>
<li>PID 该进程的 ID 号</li>
<li>%CPU 该进程占用 CPU 资源的百分比，占用越高，进程越耗费资源</li>
<li>%MEN 该进程占用物理内存的百分比，占用越高，进程越耗费资源</li>
<li>VSZ 该进程占用虚拟内存大小，单位 KB</li>
<li>RSS 该进程占用实际物理内存的大小，单位 KB</li>
<li>TTY 该进程是在哪个终端中运行的。其中 tty1-tty7 代表本地控制台终端，tty1-tty6 是本地的字符界面终端，tty7 是图形终端。pts/0-255 代表虚拟终端，？ 代表内核运行</li>
<li>STAT 进程状态<ul>
<li>R 运行</li>
<li>S 睡眠</li>
<li>T 停止状态</li>
<li><ul>
<li>位于后台</li>
</ul>
</li>
<li>s 包含子进程</li>
</ul>
</li>
<li>START 该进程的启动时间</li>
<li>TIME 该进程占用 CPU 的运算时间，注意不是系统时间</li>
<li>COMMAND 产生此进程的命令名</li>
</ul>
</li>
</ul>
</li>
<li><h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><ul>
<li><code>pstree [选项]</code><ul>
<li>-p 显示进程的 PID</li>
<li>-u 显示进程的所属用户</li>
</ul>
</li>
</ul>
</li>
<li><h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><ul>
<li><code>top [选项]</code></li>
<li><code>top -b -n 1 &gt; top.log</code> 把每秒的 top 信息写进 <code>top.log</code> 文件中</li>
<li>选项：<ul>
<li>-d 秒数 指定 top 命令每隔几秒更新。默认是 3 秒</li>
<li>-b 使用批处理模式输出。一般和 “-n” 选项合用</li>
<li>-n 次数 指定 top 命令执行的次数。一般和 “-b” 选项合用</li>
</ul>
</li>
<li>top 命令交互模式可以执行命令<ul>
<li>? 或 h 显示帮助</li>
<li>M 以内存使用率排序</li>
<li>P 以 CPU 使用率排序，默认此项</li>
<li>N 以 PID 排序</li>
<li>q 退出 top</li>
</ul>
</li>
<li>top 参数意义<ul>
<li>第一行系统信息：<ul>
<li><code>12:26:46</code> 系统当前时间</li>
<li><code>up 1 day,13:32</code> 系统运行时间，本机已运行了 1 天 13 小时 32 分钟</li>
<li><code>2 users</code>  当前系统登录了用户</li>
<li><code>load average: 0.00,0.00,0.00</code> 系统在之前 1 分钟，5 分钟，15 分钟的平均负载。一般认为小于1时，负载较小。如果大于 1，系统已经超出负荷</li>
</ul>
</li>
<li>第二行进程信息：<ul>
<li><code>Tasks: 95 total</code> 系统中的进程总数</li>
<li><code>1 running</code> 正在运行的进程数</li>
<li><code>94 sleeping</code> 睡眠的进程</li>
<li><code>0 stopped</code> 正在停止的进程</li>
<li><code>0 zombie</code> 僵尸进程。如果不是 0，需要手工检查僵尸进程</li>
</ul>
</li>
<li>第三行 CPU 信息：<ul>
<li><code>Cpu(s) 0.1%us</code> 用户模式占用的 CPU 百分比</li>
<li><code>0.1%sy</code> 系统模式占用的 CPU 百分比</li>
<li><code>0.0%ni</code> 改变过优先级的用户进程占用的 CPU 百分比</li>
<li><code>99.7%id</code> 空闲 CPU 的 CPU 百分比</li>
<li><code>0.1%wa</code> 等待输入 / 输出的进程的占用 CPU 百分比</li>
<li><code>0.0%hi</code> 硬中断请求服务占用的 CPU 百分比</li>
<li><code>0.1%si</code> 软中断请求服务占用的 CPU 百分比</li>
<li><code>0,0%st</code> 虚拟时间百分比</li>
</ul>
</li>
<li>第四行内存信息：<ul>
<li><code>Mem: 635344k total</code> 物理内存的总量，单位 KB</li>
<li><code>571504k used</code> 已经使用的物理内存数量</li>
<li><code>53840k free</code> 空闲的物理内存数量</li>
<li><code>65800k buffers</code> 作为缓冲的内存数量</li>
</ul>
</li>
<li>第五行交换分区信息：<ul>
<li><code>Swap: 524280k total</code> 交换分区（虚拟内存）的总大小</li>
<li><code>Ok used</code> 已经使用的交互分区的大小</li>
<li><code>524280k free</code> 空闲交换分区的大小</li>
<li><code>409280k cached</code> 作为缓存的交互分区的大小</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="杀死进程"><a href="#杀死进程" class="headerlink" title="杀死进程"></a>杀死进程</h2><ul>
<li>kill<ul>
<li><code>kill -l</code> 查看可用的进程信号</li>
<li><code>kill -1 进程 ID</code> 重启进程</li>
<li><code>kill -9 进程 ID</code> 强制杀死进程</li>
</ul>
</li>
<li>killall<ul>
<li><code>killall [选项] [信号] 进程名</code><ul>
<li>选项：<ul>
<li>-i 交互式，询问是否要杀死某个进程</li>
<li>-I 忽略进程名的大小写</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>pkill<ul>
<li><code>pkill [选项] [信号] 进程名</code><ul>
<li>选项：<ul>
<li>-t 终端号：按照终端号踢出用户</li>
</ul>
</li>
<li>用法：<ul>
<li><code>pkill -9 -t tty1</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="修改进程优先级"><a href="#修改进程优先级" class="headerlink" title="修改进程优先级"></a>修改进程优先级</h2><p>Linux 操作系统是一个多用户、多任务的操作系统，Linux 系统中通知运行着非常多的进程。但是 CPU 在同一个时钟周期内只能运算一个指令。进程优先级决定了每个进程处理的先后顺序呢。</p>
<p>执行命令 <code>ps -le</code> 返回的结果中，PRI 代表 Priority，NI 代表 Nice。这两个值都是优先级，数字越少代表改进程优先级越高。</p>
<p>用户可以修改 NI 值，注意事项如下：</p>
<ul>
<li>NI 值的范围是 -20 到 19</li>
<li>普通用户调整 NI 值的范围是 0 到 19，而且只能调整自己的进程</li>
<li>普通用户只能调高 NI 值，而不能降低，如原本 NI 值为0，则只能调整为大于 0</li>
<li>root 用户才能设定进程 NI 值为负值，而且可以调整任何用户的进程</li>
<li>PRI（最终值）= PRI（原始值）+ NI</li>
<li>用户只能修改 NI 的值，不能直接修改 PRI</li>
</ul>
<p>修改进程优先级的命令如下：</p>
<ul>
<li>nice<ul>
<li><code>nice [选项] 命令</code> nice 的命令可以给新执行的命令直接赋予 NI 值，但是不能修改已经存在进程的 NI 值<ul>
<li>选项：<ul>
<li>-n NI 值：给命令赋予 NI 值</li>
</ul>
</li>
<li>用法：<ul>
<li><code>nice -n -5 service httpd start</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>renice<ul>
<li><code>renice [优先级] 进程 ID</code> renice 命令是修改已经存在进程的 NI 值的命令<ul>
<li>用法：<ul>
<li><code>renice -10 2125</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="工作管理"><a href="#工作管理" class="headerlink" title="工作管理"></a>工作管理</h2><p>工作管理指的是在单个登录终端中（也就是登录的 Shell 界面中）同时管理多个工作的行为</p>
<p>工作管理注意事项如下：</p>
<ul>
<li>当前的登录终端，只能管理当前终端的工作，而不能管理其他登录终端的工作</li>
<li>放入后台的命令必须可以持续运行一段时间，这样我们才能扑捉和操作这个工作</li>
<li>放入后台执行的命令不能和前台用户有交互或需要前台输入，否则放入后台只能暂停，而不能执行</li>
</ul>
<h2 id="工作管理方法"><a href="#工作管理方法" class="headerlink" title="工作管理方法"></a>工作管理方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 把命令放入后台，并在后台执行</div><div class="line">top &amp;</div><div class="line"></div><div class="line"># 按下 ctrl + z 快捷键，放在后台暂停</div><div class="line">top</div></pre></td></tr></table></figure>
<ul>
<li>jobs<ul>
<li><code>josb [选项]</code><ul>
<li>选项：<ul>
<li>-l 显示工作的 PID</li>
</ul>
</li>
<li>+ 号代表最近一个放入后台的工作，也是工作恢复时，默认恢复的工作；- 号代表倒数第二个放入后台的工作</li>
</ul>
</li>
</ul>
</li>
<li>fg<ul>
<li><code>fg %工作号</code> 将后台暂停的工作恢复到前台执行，注意 % 号可以省略，但是注意工作号和 PID 的区别</li>
</ul>
</li>
<li>bg<ul>
<li><code>bg %工作号</code> 后台恢复执行的命令，是不能和前台有交互的，否则不能恢复到后台执行</li>
</ul>
</li>
</ul>
<h2 id="后台命令脱离登录终端执行的方法"><a href="#后台命令脱离登录终端执行的方法" class="headerlink" title="后台命令脱离登录终端执行的方法"></a>后台命令脱离登录终端执行的方法</h2><ul>
<li>第一种方法是把需要后台执行的命令加入 /etc/rc.local 文件</li>
<li>第二种方法是使用系统定时任务，让系统在指定的时间执行某个后台命令</li>
<li>第三种方法是使用 nohup 命令</li>
</ul>
<h2 id="系统资源查看"><a href="#系统资源查看" class="headerlink" title="系统资源查看"></a>系统资源查看</h2><ul>
<li>vmstat<ul>
<li><code>vmstat [刷新延时 刷新次数]</code></li>
<li>用法：<ul>
<li><code>vmstat 1 3</code></li>
</ul>
</li>
<li>参数：<ul>
<li>procs：进程信息字段<ul>
<li>r 等待运行的进程数，数量越大，系统越繁忙</li>
<li>b 不可被唤醒的进程数量，数量越大，系统越繁忙</li>
</ul>
</li>
<li>memory：内存信息字段<ul>
<li>free 空闲的内存容量，单位 KB</li>
<li>buff 缓冲的内存容量，单位 KB</li>
<li>cache 缓存的内存容量，单位 KB</li>
<li>swpd 虚拟内存的使用情况，单位 KB</li>
<li>缓冲和缓存的区别：缓存是用来加速数据读取的，缓冲是用来加速数据写入的</li>
</ul>
</li>
<li>swap：交换分区的信息字段<ul>
<li>si 从磁盘中交换到内存中数据的数量，单位 KB</li>
<li>so 从内存中交换到磁盘中数据的数量，单位 KB。此两个数越大，证明数据需要经常在磁盘和内存之间交换，系统性能越差。</li>
</ul>
</li>
<li>io：磁盘读写信息字段<ul>
<li>bi 从块设备读入数据的总量，单位是块</li>
<li>bo 写到块设备的数据的总量，单位是块。此两个数越大，代表系统的 I/O 越繁忙</li>
</ul>
</li>
<li>system：系统信息字段<ul>
<li>in 每秒被中断的进程次数</li>
<li>cs 每秒进行的事件切换次数。此两个数越大，代表系统与接口设备的通信非常繁忙</li>
</ul>
</li>
<li>CPU：CPU 信息字段<ul>
<li>us 非内核进程消耗 CPU 运算时间的百分比</li>
<li>sy 内核进程消耗 CPU 运算时间的百分比</li>
<li>id 空闲 CPu 的百分比</li>
<li>wa 等待 I/O 所消耗的 CPU 百分比</li>
<li>st 被虚拟机消耗的 CPU 百分比</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>dmesg<ul>
<li><code>dmesg</code> 显示系统内核信息</li>
</ul>
</li>
<li>free<ul>
<li><code>free [选项]</code> 查看内存使用状态<ul>
<li>选项：<ul>
<li>-\b 以字节为单位显示</li>
<li>-\k 以 KB 为单位显示，默认就是以 KB 为单位显示</li>
<li>-\m 以 MB 为单位显示</li>
<li>-\g 以 GB 为单位显示</li>
</ul>
</li>
<li>参数：<ul>
<li>第一行：total 是总内存数，used 是已经使用的内存数，free 是空闲的内存数，shared 是多个进程共享的内存总数，buffers 是缓冲内存数，cached 是缓存内存数。默认单位是 KB</li>
<li>第二行：-/buffers/cache 的内存数，相当于第一行的 used-buffers-cached。+/buffers/cache 的内存数，相当于第一行的 free + buffers + cached</li>
<li>第三行：total 是 swap 的总数；used 是已经使用的 swap 数，free 是空闲的 swap 数。默认单位是 KB</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>cat /proc/cpuinfo<ul>
<li>查看 CPU 信息</li>
</ul>
</li>
<li>uptime<ul>
<li>显示系统的启动时间和平均负载，也就是 top 命令的第一行。</li>
</ul>
</li>
<li>uname<ul>
<li><code>uname [选项]</code><ul>
<li>选项：<ul>
<li>-a 查看系统所有相关信息</li>
<li>-r 查看内核版本</li>
<li>-s 查看内核名称</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>file /bin/ls<ul>
<li>查看系统操作位数</li>
</ul>
</li>
<li>lsb_release -a<ul>
<li>查询当前 Linxu 系统的发行版本</li>
</ul>
</li>
<li>lsof<ul>
<li><code>lsof    [选项]</code><ul>
<li>选项：<ul>
<li>-c 字符串：只列出以字符串开头的进程打开的文件</li>
<li>-u 用户名：只列出某个用户的进程打开的文件</li>
<li>-p PID：列出某个 PID 进程打开的文件</li>
</ul>
</li>
<li>例子：<ul>
<li><code>lsof | more</code></li>
<li><code>lsof /sbin/init</code></li>
<li><code>lsof -c httpd</code></li>
<li><code>lsof -u root</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/24/Linux-系统管理/" data-id="cj4i1olrk001d0y4bp5126wzh" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-服务管理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/23/Linux-服务管理/" class="article-date">
  <time datetime="2016-09-23T12:26:20.000Z" itemprop="datePublished">2016-09-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/23/Linux-服务管理/">Linux 服务管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Linux-服务管理"><a href="#Linux-服务管理" class="headerlink" title="Linux 服务管理"></a>Linux 服务管理</h2><h3 id="简介与分类"><a href="#简介与分类" class="headerlink" title="简介与分类"></a>简介与分类</h3><ul>
<li><h4 id="系统的运行级别"><a href="#系统的运行级别" class="headerlink" title="系统的运行级别"></a>系统的运行级别</h4><ul>
<li>查看运行级别命令：<code>runlevel</code></li>
<li>修改运行级别命令：<code>init 运行级别</code></li>
<li>系统开机进入级别：<code>vim /etc/inittab</code> ~ <code>id:3initdefault:</code></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>运行级别</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>关机</td>
</tr>
<tr>
<td>1</td>
<td>单用户模式，主要用于系统修复</td>
</tr>
<tr>
<td>2</td>
<td>不完全的命令行模式，不含 NFS 服务</td>
</tr>
<tr>
<td>3</td>
<td>完全的命令行模式，就是标准字符界面</td>
</tr>
<tr>
<td>4</td>
<td>系统保留</td>
</tr>
<tr>
<td>5</td>
<td>图形模式</td>
</tr>
<tr>
<td>6</td>
<td>重启动</td>
</tr>
</tbody>
</table>
<ul>
<li><h4 id="服务的分类"><a href="#服务的分类" class="headerlink" title="服务的分类"></a>服务的分类</h4><ul>
<li>Linux 服务<ul>
<li>PRM 包默认安装的服务<ul>
<li>独立的服务<ul>
<li>默认配置文件位置<ul>
<li>/etc/init.d/ 启动脚本位置</li>
<li>/etc/sysconfig/ 初始化环境配置文件位置</li>
<li>/etc/ 配置文件位置</li>
<li>/etc/xinetd.conf xinetd 配置文件</li>
<li>/etc/xinetd.d/ 基于 xineted 服务的启动脚本</li>
<li>/var/lib/ 服务产生的数据放在这里</li>
<li>/var/log/ 日志</li>
</ul>
</li>
</ul>
</li>
<li>基于 xinetd 服务</li>
</ul>
</li>
<li>源码包安装的服务<ul>
<li>源码包安装位置，一般是 <code>/usr/local</code> 下</li>
</ul>
</li>
<li>PRM 包安装和源码包安装的区别：两者服务安装的位置不同</li>
</ul>
</li>
</ul>
</li>
<li><h4 id="服务与端口"><a href="#服务与端口" class="headerlink" title="服务与端口"></a>服务与端口</h4><ul>
<li>概念：如果把 IP 地址比作一间房子，端口就是出入这间房子的门。真正的房子只有几个门，但是一个 IP 地址的端口可以有 65536 个</li>
<li>服务与端口的对应：<code>cat /etc/services</code></li>
<li>查询系统中开启的服务：<code>netstat [选项]</code><ul>
<li>-t 列出 TCP 数据</li>
<li>-u 列出 UDP 数据</li>
<li>-l 列出正在监听的网络服务（不包含已经连接的网络服务）</li>
<li>-n 用端口号来显示服务，而不是用服务名</li>
<li>-p 列出该服务的进程 ID</li>
</ul>
</li>
<li>chkconfig 和 netstat 的区别<ul>
<li><code>chkconfig</code> 查看自启动命令</li>
<li><code>netstat</code> 查看启动命令</li>
</ul>
</li>
</ul>
</li>
<li><h4 id="服务启动与自启动"><a href="#服务启动与自启动" class="headerlink" title="服务启动与自启动"></a>服务启动与自启动</h4><ul>
<li>独立服务的自启动<ul>
<li><code>ntsysv</code> 命令图形界面管理自启动</li>
<li><code>/etc/rc.d/rc.local</code> 文件修改管理自启动</li>
<li><code>chkconfig --list</code> 查看服务自启动状态，可以看到所有 RPM 包安装的服务</li>
<li><code>chkconfig [--level 运行级别] [独立服务名] [on|off]</code> 修改服务自启动状态</li>
</ul>
</li>
<li>独立服务的启动<ul>
<li><code>/etc/init.d/独立服务名 start、stop、status、restart</code></li>
<li><code>service 独立服务名 start、stop、status、restart</code></li>
</ul>
</li>
<li>源码包安装服务的启动<ul>
<li>使用绝对路径，调用启动脚本来启动。不同的源码包的启动脚本不同。可以查看源码包的安装说明，查看启动脚本的方法。</li>
<li>用法：<code>/usr/local/apache2/bin/apachectl start</code></li>
</ul>
</li>
<li>源码包服务的自启动<ul>
<li><code>vi /etc/rc.d/rc.local</code> 加入 <code>/usr/local/apache2/bin/apachectl start</code></li>
</ul>
</li>
<li>源码包的 Apache 服务能被 Service 命令管理启动<ul>
<li><code>ln -s /usr/local/apache2/bin/apachectl /etc/init.d/apache</code></li>
</ul>
</li>
<li>源码包的 Apache 服务能被 chkconfig 与 ntsysv 命令管理自启动<ul>
<li><code>vi /etc/init.d/apache</code> 加入 <code># chkconfig:35 86 76</code> 和 <code>description:source package apache</code></li>
<li><code>chkconfig --add apache</code> 把源码包 apache 加入 chkconfig 命令</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/23/Linux-服务管理/" data-id="cj4i1olqu000p0y4b70hdgi0d" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-Shell-基础之正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/22/Linux-Shell-基础之正则表达式/" class="article-date">
  <time datetime="2016-09-22T12:56:54.000Z" itemprop="datePublished">2016-09-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/22/Linux-Shell-基础之正则表达式/">Linux-Shell-基础之正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="第1章-正则表达式"><a href="#第1章-正则表达式" class="headerlink" title="第1章 正则表达式"></a>第1章 正则表达式</h2><h3 id="1-1-什么是正则表达式"><a href="#1-1-什么是正则表达式" class="headerlink" title="1-1 什么是正则表达式"></a>1-1 什么是正则表达式</h3><p>正则表达式是用于描述字符排列和匹配模式的一种语法规则。它主要用于字符串的模式分割、匹配、查找及替换操作。</p>
<h3 id="1-2-正则表达式与通配符"><a href="#1-2-正则表达式与通配符" class="headerlink" title="1-2 正则表达式与通配符"></a>1-2 正则表达式与通配符</h3><ul>
<li>正则表达式用来在文件中匹配符合条件的字符串，正则是包含匹配。grep、awk、sed 等命令可以支持正则表达式（字符串）</li>
<li>通配符用来匹配符合条件的文件名，通配符是完全匹配。ls、find、cp 这些命令不支持正则表达式，所以只能使用 Shell 自己的通配符来进行匹配了。（文件）<ul>
<li>* 匹配任意内容</li>
<li>? 匹配任意一个内容</li>
<li>[] 匹配括号中的一个字符</li>
</ul>
</li>
</ul>
<h3 id="1-3-基础正则表达式"><a href="#1-3-基础正则表达式" class="headerlink" title="1-3 基础正则表达式"></a>1-3 基础正则表达式</h3><table>
<thead>
<tr>
<th>元字符</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>前一个字符匹配 0 次或任意多次</td>
</tr>
<tr>
<td>.</td>
<td>匹配除了换行符外任意一个字符</td>
</tr>
<tr>
<td>^</td>
<td>匹配行首，例如：^hello 会匹配以 hello 开头的行</td>
</tr>
<tr>
<td>$</td>
<td>匹配行尾，例如：hello&amp; 会匹配以 hello 结尾的行</td>
</tr>
<tr>
<td>[]</td>
<td>匹配中括号中指定的任意一个字符，只匹配一个字符。</td>
</tr>
<tr>
<td>[^]</td>
<td>匹配除中括号的字符以外的任意一个字符</td>
</tr>
<tr>
<td>\</td>
<td>转义符，用于取消讲特殊符号的含义取消</td>
</tr>
<tr>
<td>\{n\}</td>
<td>表示其前面的字符恰好出现 n 次</td>
</tr>
<tr>
<td>\{n,\}</td>
<td>表示其前面的字符出现不小于 n 次</td>
</tr>
<tr>
<td>\{n,m\}</td>
<td>表示其前面的字符至少出现 n 次，最多出现 m 次</td>
</tr>
</tbody>
</table>
<h2 id="第2章-字符截取命令"><a href="#第2章-字符截取命令" class="headerlink" title="第2章 字符截取命令"></a>第2章 字符截取命令</h2><ul>
<li>cut 列提取字符串<ul>
<li><code>cut [选项] 文件名</code><ul>
<li>-f 列号：提取第几列<ul>
<li><code>cut -f 2 student.txt</code> 截取第二列</li>
<li><code>cut -f 2,4 student.txt</code> 截取第二、第四列</li>
</ul>
</li>
<li>-d 分隔符：按照指定分隔符分割列<ul>
<li><code>grep &quot;/bin/bash&quot; /etc/passwd |grep -v &quot;root&quot; | cut -f 1 -d &quot;:&quot;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>printf 格式化输出命令<ul>
<li><code>printf &#39;输出类型输出格式&#39; 输出内容</code><ul>
<li>输出类型<ul>
<li>%ns 输出字符串。n 是数字指代输出几个字符</li>
<li>%ni 输出整数。n 是数字指代输出几个数字</li>
<li>%m.nf 输出浮点数。m 和 n 是数字，指代输出的整数位数和小数位数。如 %8.2f 代表共输出 8 位数，其中 2 位是小数，6 位是整数。</li>
</ul>
</li>
<li>输出格式<ul>
<li>\a 输出警告声音</li>
<li>\b 输出退格键</li>
<li>\f 清除屏幕</li>
<li>\n 换行</li>
<li>\r 回车</li>
<li>\t 水平输出 Tab 键</li>
<li>\v 垂直输出 Tab 键</li>
</ul>
</li>
</ul>
</li>
<li>在 <code>awk</code> 命令的输出中支持 <code>print</code> 和 <code>printf</code> 命令</li>
</ul>
</li>
<li>awk 字符截取命令<ul>
<li><code>awk &#39;条件1{动作1}条件2{动作2}...&#39; 文件名</code></li>
<li>条件<ul>
<li>一般使用关系表达式作为条件</li>
<li>x&gt;10 判断变量 x 是否大于 10</li>
<li>x&gt;=10 大于等于</li>
<li>x&lt;=10 小于等于</li>
</ul>
</li>
<li>动作<ul>
<li>格式化输出</li>
<li>流程控制语句</li>
</ul>
</li>
<li>例子<ul>
<li><code>awk &#39;{printf $2 &quot;\t&quot; $4 &quot;\n&quot;}&#39; student.txt</code></li>
<li><code>awk &#39;{print $2 &quot;\t&quot; $4 }&#39; student.txt</code></li>
<li><code>df -h | awk &#39;{print $1 &quot;\t&quot; $3}&#39;</code><ul>
<li><code>akw &#39;BEGIN{printf &quot;This is a transcript \n&quot;}{printf $2 &quot;\t&quot; $4 &quot;\n&quot;}&#39; student.txt</code></li>
<li><code>cat /etc/passwd |grep &quot;/bin/bash&quot; | awk &#39;BEGIN{FS=&quot;:&quot;}{printf $1 &quot;\t&quot; $3 &quot;\n&quot;}&#39;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>sed 字符替换命令<ul>
<li>sed 是一个几乎包括在所有 UNIX 平台（包括 Linux）的轻量级编辑器。sed 主要是用来将数据进行选取、替换、删除、新增的命令</li>
<li><code>sed [选项] &#39;[动作]&#39; 文件名</code><ul>
<li>选项<ul>
<li>-n 一般 sed 命令会把所有数据都输出到屏幕，如果加入此选择则只会把经过 sed 命令处理的行输出到屏幕</li>
<li>-e 允许对输入数据应用多条 sed 命令编辑</li>
<li>-i 用 sed 的修改结果直接修改读取数据的文件，而不是由屏幕输出</li>
</ul>
</li>
<li>动作<ul>
<li>a 追加，在当前行后添加一行或多行</li>
<li>c 行替换，用 c 后面的字符串替换原数据行</li>
<li>i 插入，在当期行前插入一行或多行</li>
<li>d 删除，删除指定行</li>
<li>p 打印，输出指定的行</li>
<li>s 字符串替换，用一个字符串替换另外一个字符串，格式为 “行范围s/旧字符串g”</li>
</ul>
</li>
<li>例子<ul>
<li><code>sed &#39;2p&#39; student.txt</code> 查看文件的第二行</li>
<li><code>sed &#39;2,4d&#39; student.txt</code> 表示删除【第2-4行】，但是不改变文件本身</li>
<li><code>sed &#39;2a piaoliangdecxiaoguniang&#39; student.txt</code> 在第2行之后添加字符串，但是不改变字符串本身</li>
<li><code>sed &#39;4c xxwmpg&#39; student.txt</code> 将第二行的整行替换为xxwmpg</li>
<li><code>sed &#39;6s/70/100/g&#39; student.txt</code> 将第7行的所有70全部替换为100，如果不指定行的话会替换所有的指定字符串</li>
<li><code>sed -e &#39;s/fengj//g&#39;;s/cang//g&#39; student.txt</code> 同时把fengj和cang替换为空</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第3章-字符处理命令"><a href="#第3章-字符处理命令" class="headerlink" title="第3章 字符处理命令"></a>第3章 字符处理命令</h2><ul>
<li>sort 排序命令<ul>
<li><code>sort [选项] 文件名</code><ul>
<li>选项<ul>
<li>-f 忽略大小写</li>
<li>-n 以数值型进行排序，默认使用字符串型排序</li>
<li>-r 反向排序</li>
<li>-t 指定分隔符，默认的分隔符是制表符</li>
<li>-k n[,m] 按照指定的字段范围排序。从第 n 字段开始，m 字段结束（默认到行尾）</li>
</ul>
</li>
<li>用法<ul>
<li><code>sort /etc/passwd</code> 用户信息正向排序</li>
<li><code>sort -r /etc/passwd</code> 用户信息反向排序</li>
<li><code>sort -t &quot;:&quot; -k 3,3 /etc/passwd</code> 指定分隔符是 “:”，用第三字段开头，第三字段结尾排序，就是只用第三字段排序</li>
<li><code>sort -n -t &quot;:&quot; -k 3,3 /etc/passwd</code> 作用同上，但把指定字符串排序改为数字排序</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>wc 统计命令<ul>
<li><code>wc [选项] 文件名</code><ul>
<li>选项：<ul>
<li>-l 只统计行数</li>
<li>-w 只统计单词数</li>
<li>-m 只统计字符数</li>
</ul>
</li>
<li>用法：<ul>
<li><code>wc /etc/passwd</code></li>
<li><code>wc -l /etc/passwd</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/22/Linux-Shell-基础之正则表达式/" data-id="cj4i1olqq000h0y4bl4k50ijr" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-网络基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/20/Linux-网络基础/" class="article-date">
  <time datetime="2016-09-20T12:33:54.000Z" itemprop="datePublished">2016-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/20/Linux-网络基础/">Linux 网络基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h2><h3 id="ISO-OSI-七层模型简介"><a href="#ISO-OSI-七层模型简介" class="headerlink" title="ISO / OSI 七层模型简介"></a>ISO / OSI 七层模型简介</h3><ul>
<li>ISO：国际标准化组织</li>
<li>OSI：开放系统互联模型<ul>
<li>OSI 的七层模型<ul>
<li>应用层 - APDU<ul>
<li>APDU 是应用协议数据单元</li>
</ul>
</li>
<li>表示层 - PPDU<ul>
<li>PPDU 是表示层协议数据单元</li>
</ul>
</li>
<li>会话层 - SPDU<ul>
<li>SPDU 是会话协议数据单元</li>
</ul>
</li>
<li>传输层 - TPDU<ul>
<li>TPDU 是传输协议数据单元</li>
</ul>
</li>
<li>网络层 - 报文<ul>
<li>IP 地址负责外网通信</li>
</ul>
</li>
<li>数据链路层 - 帧<ul>
<li>MAC 地址负责局域网通信</li>
</ul>
</li>
<li>物理层 - 比特</li>
</ul>
</li>
<li>数据发送时候，从上层向下层传递；数据接收时候，从下层向上层传递。</li>
</ul>
</li>
</ul>
<h3 id="ISO-OSI-七层模型详解"><a href="#ISO-OSI-七层模型详解" class="headerlink" title="ISO / OSI 七层模型详解"></a>ISO / OSI 七层模型详解</h3><ul>
<li>应用层 - APDU<ul>
<li>用户接口</li>
</ul>
</li>
<li>表示层 - PPDU<ul>
<li>数据的表现形式、特定功能的实现如-加密</li>
</ul>
</li>
<li>会话层 - SPDU<ul>
<li>对应用会话的管理、同步</li>
</ul>
</li>
<li>传输层 - TPDU<ul>
<li>可靠与不可靠的传输、传输前的错误检测、流控</li>
</ul>
</li>
<li>网络层 - 报文<ul>
<li>提供逻辑地址、选路</li>
</ul>
</li>
<li>数据链路层 - 帧<ul>
<li>城帧、用 MAC 地址访问媒介、错误检测与修正</li>
</ul>
</li>
<li>物理层 - 比特<ul>
<li>设备之间的比特流的传输、物理接口、电器特征等</li>
</ul>
</li>
</ul>
<h3 id="TCP-IP-四层模型"><a href="#TCP-IP-四层模型" class="headerlink" title="TCP / IP 四层模型"></a>TCP / IP 四层模型</h3><ul>
<li>TCP / IP 四层模型<ul>
<li>应用层 （对应 OSI 模型的应用层、表示层、会话层）<ul>
<li>应用层对应于 OSI 参考模型的应用层、表示层、会话层，为用户提供所需要的各种服务，例如：FTP、Telnet、DNS、SMTP 等</li>
</ul>
</li>
<li>传输层 （对应 OSI 模型的传输层）<ul>
<li>传输层对应于 OSI 模型的传输层，为应用层实体提供端到端的通信功能，保证了数据包的顺序传送及数据的完整性。该层定义了两个主要的协议：传输控制协议（TCP）和用户数据协议（UDP）</li>
</ul>
</li>
<li>网际互联层（对应 OSI 模型的网络层）<ul>
<li>网际互联对应于 OSI 模型的网络层，主要解决主机到主机的通信问题。它所包含的协议涉及数据包在整个网络上的逻辑传输。该层有三个主要协议：网际协议（IP）、互联网组管理协议（IGMP）和互联网控制报文协议（ICMP）。</li>
</ul>
</li>
<li>网络接口层（对应 OSI 模型的数据链路层、物理层）<ul>
<li>网络接口层与 OSI 模型中的物理层和数据链路层相对应。它负责监视数据在主机和网络之间的交换。事实上，TCP /IP 本身并未定义该层的协议，而由参与互连的各网络使用自己的物理层和数据链路层协议，然后与 TCP / IP 的网络接口层进行连接。地址解析协议（ARP）工作在此层，即 OSI 参考模型的数据链路层。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>TCP / IP 三次握手（两军问题）</p>
<p>数据封装过程</p>
<table>
<thead>
<tr>
<th>应用数据</th>
<th>字节流（数据）</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td>FTP + 数据</td>
</tr>
<tr>
<td>传输层</td>
<td>TCP 头 + FTP + 数据</td>
</tr>
<tr>
<td>网络层</td>
<td>IP 头 + TCP 头 + FTP + 数据</td>
</tr>
<tr>
<td>数据链路层</td>
<td>以太帧头 + (IP 头 + TCP 头 + FTP + 数据) = IP 数据报</td>
</tr>
<tr>
<td>最后</td>
<td>以太帧头 + 目的地址 + 源地址 + 包类型 + 包数据（IP 数据报） + CRC</td>
</tr>
</tbody>
</table>
<h3 id="IP地址详解"><a href="#IP地址详解" class="headerlink" title="IP地址详解"></a>IP地址详解</h3><ul>
<li>IP 包头<ul>
<li>第一行<ul>
<li>版本（4）</li>
<li>头部长度（4）</li>
<li>优先级和服务类型（8）</li>
<li>总长度（16）</li>
</ul>
</li>
<li>第二行<ul>
<li>标识（16）</li>
<li>标志（3）</li>
<li>片偏移（13）</li>
</ul>
</li>
<li>第三行<ul>
<li>生存时间（8）</li>
<li>协议（8）</li>
<li>头部校验和（16）</li>
</ul>
</li>
<li>第四行<ul>
<li>源 IP 地址（32）</li>
</ul>
</li>
<li>第五行<ul>
<li>目的 IP 地址（32）</li>
</ul>
</li>
<li>第六行<ul>
<li>选项</li>
</ul>
</li>
<li>第七行<ul>
<li>数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>IP 地址分类</p>
<table>
<thead>
<tr>
<th>网络类别</th>
<th>最大网络数</th>
<th>IP 地址范围</th>
<th>最大主机数</th>
<th>私有 IP 地址范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>126</td>
<td>1.0.0.0 – 126.255.255.255</td>
<td>2^24-2</td>
<td>10.0.0.0 – 10.255.255.255</td>
</tr>
<tr>
<td>B</td>
<td>16384</td>
<td>128.0.0.0 – 191.255.255.255</td>
<td>2^16-2</td>
<td>172.16.0.0 – 172.31.255.255</td>
</tr>
<tr>
<td>C</td>
<td>2098152</td>
<td>192.0.0.0 – 223.255.255.255</td>
<td>2^8-2</td>
<td>192.168.0.0 – 192.168.255.255</td>
</tr>
</tbody>
</table>
<h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><h3 id="网关作用"><a href="#网关作用" class="headerlink" title="网关作用"></a>网关作用</h3><ul>
<li>网关（Gateway）又称为网间连接器、协议转换器</li>
<li>网关在网络层以上实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连</li>
<li>网关既可以用于广域网互连，也可以用于局域网互连</li>
<li>网关是一种充当转换重任的服务器或路由器</li>
</ul>
<h3 id="端口作用"><a href="#端口作用" class="headerlink" title="端口作用"></a>端口作用</h3><ul>
<li>TCP 协议包头<ul>
<li>第一行<ul>
<li>源端口（16）</li>
<li>目的端口（16）</li>
</ul>
</li>
<li>第二行<ul>
<li>序列号（32）</li>
</ul>
</li>
<li>第三行<ul>
<li>确认号（32）</li>
</ul>
</li>
<li>第四行<ul>
<li>数据偏移（4）</li>
<li>保留（6）</li>
<li>标志（6）</li>
<li>窗口（16）</li>
</ul>
</li>
<li>第五行<ul>
<li>校验和（16）</li>
<li>紧急指针（16）</li>
</ul>
</li>
<li>第六行<ul>
<li>选项</li>
</ul>
</li>
<li>第七行<ul>
<li>数据</li>
</ul>
</li>
</ul>
</li>
<li>UDP 协议包头<ul>
<li>第一行<ul>
<li>源端口（16）</li>
<li>目的端口（16）</li>
</ul>
</li>
<li>第二行<ul>
<li>长度（16）</li>
<li>校验和（16）</li>
</ul>
</li>
<li>第三行<ul>
<li>数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>常见端口号</p>
<ul>
<li>FTP（文件传输协议）：20 21</li>
<li>SSH（安全 Shell 协议）：22</li>
<li>TELNET（远程登录协议）：23</li>
<li>DNS（域名系统）：53</li>
<li>HTTP（超文本传输协议）：80</li>
<li>SMTP（简单邮件传输协议）：25</li>
<li>POP3（邮局协议 3 代）：110</li>
</ul>
<p>查看本机启用的端口</p>
<ul>
<li>netstat -an<ul>
<li>-a 查看所有连接和监听端口</li>
<li>-n 显示 IP 地址和端口号，而不显示域名和服务名</li>
</ul>
</li>
</ul>
<h3 id="DNS-作用"><a href="#DNS-作用" class="headerlink" title="DNS 作用"></a>DNS 作用</h3><ul>
<li>DNS 的作用：将域名解析为 IP 地址<ul>
<li>客户机向 DNS 服务器发送域名查询请求</li>
<li>DNS 服务器告知客户机 Web 服务器的 IP 地址</li>
<li>客户机与 Web 服务器通信</li>
</ul>
</li>
<li>DNS 的查询类型<ul>
<li>从查询方式上分<ul>
<li>递归查询<ul>
<li>要么做出查询成功响应，要么做出查询失败的响应，一般客户机和服务器之间属于递归查询，即当客户机向 DNS 服务器发出请求后，若 DNS 服务器本身不能解析，则会向另外的 DNS 服务器发出查询请求，得到结果后转交给客户机。</li>
</ul>
</li>
<li>迭代查询<ul>
<li>服务器收到一次迭代查询回复一次结果，这个结果不一定是目标 IP 与域名的映射关系，也可以是其他 DNS 服务器的地址</li>
</ul>
</li>
</ul>
</li>
<li>从查询内容上分<ul>
<li>正向查询由域名查找 IP 地址</li>
<li>反向查询由 IP 地址查找域名</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Linux-网络配置"><a href="#Linux-网络配置" class="headerlink" title="Linux 网络配置"></a>Linux 网络配置</h2><h3 id="IP-地址配置"><a href="#IP-地址配置" class="headerlink" title="IP 地址配置"></a>IP 地址配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 查看与配置网络状态命令</div><div class="line">ifconfig</div><div class="line"></div><div class="line"># 临时设置 eth0 网卡的 IP 地址与子网掩码</div><div class="line">ifconfig eth0 192.168.0.200 netmask 255.255.255.0</div><div class="line"></div><div class="line"># setup 图形界面（红帽专用）</div><div class="line">setup</div></pre></td></tr></table></figure>
<h3 id="使用文件配置-IP-地址"><a href="#使用文件配置-IP-地址" class="headerlink" title="使用文件配置 IP 地址"></a>使用文件配置 IP 地址</h3><p>网卡信息文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</div></pre></td></tr></table></figure></p>
<p>主机名文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/sysconfig/network</div></pre></td></tr></table></figure></p>
<h2 id="Linux-网络命令"><a href="#Linux-网络命令" class="headerlink" title="Linux 网络命令"></a>Linux 网络命令</h2><h3 id="网络环境查看命令"><a href="#网络环境查看命令" class="headerlink" title="网络环境查看命令"></a>网络环境查看命令</h3><ul>
<li><code>ifconfig</code> 查看与配置网络状态命令<ul>
<li>只能看到 IP 和子网掩码，看不到网关和 DNS</li>
</ul>
</li>
<li><code>ifdown 网卡设备名称</code> 禁用指定网卡设备</li>
<li><code>ifup 网卡设置名称</code> 启用指定网卡设备</li>
<li><code>netstat 选项</code><ul>
<li>-t 列出 TCP 协议端口</li>
<li>-u 列出 UDP 协议端口</li>
<li>-n 不使用域名与服务名，而是用 IP 地址和端口号</li>
<li>-l 仅列出在监听状态网络服务</li>
<li>-a 列出所有的网络连接</li>
</ul>
</li>
<li><code>route -n</code> 查看路由列表</li>
<li><code>route add default gw 192.168.1.1</code> 临时设定网关</li>
<li><code>nslookup [主机名或 IP]</code> 进行域名与 IP 地址解析</li>
<li><code>nslookup &gt;server</code> 查看本机 DNS 服务器</li>
</ul>
<h3 id="网络测试命令"><a href="#网络测试命令" class="headerlink" title="网络测试命令"></a>网络测试命令</h3><ul>
<li><code>ping [选项] [IP 或域名]</code> 探测指定 IP 或域名的网络状况<ul>
<li>-c 次数 指定 ping 包的次数</li>
</ul>
</li>
<li><code>telnet [域名或 IP] [端口]</code> 远程管理与端口探测命令</li>
<li><code>wget URL</code> 下载命令</li>
<li><code>tcpdump -i eth0 -nnX port 21</code><ul>
<li>-i 指定网卡接口</li>
<li>-X 以十六进制和 ASCII 码显示数据包内容</li>
<li>-nn 将数据包中的域名与服务转为 IP 和端口</li>
<li>port 指定监听的端口</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/20/Linux-网络基础/" data-id="cj4i1olrf00150y4bmh77gf9s" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-命令基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/19/Linux-命令基础/" class="article-date">
  <time datetime="2016-09-19T12:34:56.000Z" itemprop="datePublished">2016-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/19/Linux-命令基础/">Linux 命令基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="命令基本格式及文件处理命令"><a href="#命令基本格式及文件处理命令" class="headerlink" title="命令基本格式及文件处理命令"></a>命令基本格式及文件处理命令</h2><h3 id="命令提示符"><a href="#命令提示符" class="headerlink" title="命令提示符"></a>命令提示符</h3><p>命令提示符例子：<code>[root@localhost ~]#</code>，参数意义如下：</p>
<ul>
<li>root：当前登录用户名称</li>
<li>@：分隔用户名称和主机名称</li>
<li>localhost：主机名称</li>
<li>~：当前所在目录</li>
<li>#：超级用户提示符，普通用户提示符是 $</li>
</ul>
<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><blockquote>
<p>命令 [选项] [参数]</p>
</blockquote>
<ul>
<li>个别命令使用不遵循此格式</li>
<li>当有多个选项时，可以写在一起</li>
<li>简化选项与完整选项：-a 等于 –all</li>
</ul>
<h3 id="查询目录中内容：ls"><a href="#查询目录中内容：ls" class="headerlink" title="查询目录中内容：ls"></a>查询目录中内容：ls</h3><blockquote>
<p>ls [选项] [文件或目录]</p>
</blockquote>
<p>选项：</p>
<ul>
<li>-a：显示所有文件，包括隐藏文件</li>
<li>-l：显示详细信息</li>
<li>-d：查看目录属性</li>
<li>-h：人性化显示文件大小</li>
<li>-i：显示 inode</li>
</ul>
<p>命令 <code>ls -l</code> 等于命令 <code>ll</code></p>
<h3 id="目录处理命令"><a href="#目录处理命令" class="headerlink" title="目录处理命令"></a>目录处理命令</h3><ul>
<li>新建目录：mkdir<ul>
<li><code>mkdir -p [目录名称]</code></li>
<li>-p 递归创建</li>
<li>命令英文原意：make directories</li>
</ul>
</li>
<li>切换所在目录：cd<ul>
<li><code>cd [目录名称]</code><ul>
<li>cd ~ ：进入当前用户的家目录</li>
<li>cd - ：进入上次目录</li>
<li>cd . ：进入当前目录</li>
<li>cd .. ：进入上一级目录</li>
</ul>
</li>
<li>命令英文原意：change directory</li>
<li>相对路径：参照当前所在目录，进行查找</li>
<li>绝对路径：从根目录开始制定，一级一级递归查找。在任何目录下，都能进入指定目录</li>
</ul>
</li>
<li>查询所在目录位置：pwd<ul>
<li><code>pwd</code></li>
<li>命令英文原意：print working directory</li>
</ul>
</li>
<li>删除空目录：rmdir<ul>
<li><code>rmdir [目录名称]</code></li>
<li>命令英文原意：remove empty directories</li>
</ul>
</li>
<li>删除文件或目录：rm<ul>
<li><code>rm -rf [文件或目录]</code><ul>
<li>-r ：删除目录</li>
<li>-f ：强制</li>
</ul>
</li>
<li>命令英文原意：remove</li>
</ul>
</li>
<li>复制命令：cp<ul>
<li><code>cp [选项] [原文件或目录] [目标目录]</code><ul>
<li>-r ：复制目录</li>
<li>-p ：连带文件属性复制</li>
<li>-d ：若源文件是链接文件，则复制链接属性</li>
<li>-a ：相当于 -pdr</li>
</ul>
</li>
<li>命令英文原意：copy</li>
</ul>
</li>
<li>剪切或重命名命令：mv<ul>
<li><code>mv [原文件或目录] [目标目录]</code></li>
<li>命令英文原意：move</li>
</ul>
</li>
</ul>
<h3 id="常见目录作用"><a href="#常见目录作用" class="headerlink" title="常见目录作用"></a>常见目录作用</h3><ul>
<li>/ ：根目录</li>
<li>/bin ：命令保存目录</li>
<li>/dev ：设备文件保存目录</li>
<li>/etc ：配置文件保存目录</li>
<li>/lib ：系统保存目录</li>
<li>/mnt ：系统挂载目录</li>
<li>/tmp ：临时目录</li>
<li>/sys ：</li>
<li>/var ：系统相关文档内容</li>
<li>/usr ：系统软件资源目录<ul>
<li>/usr/bin ：系统命令（普通用户）</li>
<li>/usr/sbin ：系统命令（超级用户）</li>
</ul>
</li>
<li>/boot ：启动目录，启动相关文件</li>
<li>/home ：普通用户的家目录</li>
<li>/root ：超级用户的家目录</li>
<li>/sbin ：命令保存目录</li>
<li>/proc ：直接写入内存的</li>
<li>/media ： 挂载目录</li>
</ul>
<h3 id="链接命令"><a href="#链接命令" class="headerlink" title="链接命令"></a>链接命令</h3><ul>
<li>链接命令：ln<ul>
<li><code>ln [参数] [原文件] [目标文件]</code><ul>
<li>-s ：创建软链接</li>
<li>默认创建硬链接</li>
</ul>
</li>
<li>命令英文原意：link</li>
<li>功能描述：生成链接文件</li>
</ul>
</li>
<li>硬链接特征：<ul>
<li>拥有相同的 I 节点和存储 Block 块，可以看做是同一个文件</li>
<li>可通过 I 节点识别</li>
<li>不能跨分区</li>
<li>不能针对目录使用</li>
</ul>
</li>
<li>软连接特征：<ul>
<li>类似 Windows 快捷方式</li>
<li>软链接拥有自己的 I 节点和 Block 块，但是数据块中只保存原文件的文件名和 I 节点号，并没有实际的文件数据</li>
<li>软连接文件权限都为：rwxrwxrwx</li>
<li>修改任意文件，另一个都改变</li>
<li>删除原文件，软链接不能使用</li>
</ul>
</li>
</ul>
<h2 id="文件搜索命令"><a href="#文件搜索命令" class="headerlink" title="文件搜索命令"></a>文件搜索命令</h2><h3 id="文件搜索命令-locate"><a href="#文件搜索命令-locate" class="headerlink" title="文件搜索命令 locate"></a>文件搜索命令 locate</h3><ul>
<li><code>locate 文件名</code>（只能搜索文件名）<ul>
<li>在后台数据库中按文件名搜索，搜索速度更快</li>
</ul>
</li>
<li><code>/var/lib/mlocate</code><ul>
<li>locate 命令所搜索的后台数据库</li>
</ul>
</li>
<li><code>updatedb</code><ul>
<li>更新数据库</li>
</ul>
</li>
<li><code>/etc/updatedb.conf</code> 配置文件<ul>
<li>PRUNE_BIND_MOUNTS = “yes” (开启搜索限制)</li>
<li>PRUNEFS = （搜索时，不搜索的文件系统）</li>
<li>PRUNENAMES = （搜索时，不搜索的文件类型）</li>
<li>PRUNEPATHS = （搜索时，不搜索的路径）</li>
</ul>
</li>
</ul>
<h3 id="命令搜索命令-whereis-与-which"><a href="#命令搜索命令-whereis-与-which" class="headerlink" title="命令搜索命令 whereis 与 which"></a>命令搜索命令 whereis 与 which</h3><ul>
<li>whereis<ul>
<li>搜索命令所在路径及帮助文档所在位置</li>
<li>选项<ul>
<li>-b    只查找可执行文件</li>
<li>-m    只查找帮助文件</li>
</ul>
</li>
</ul>
</li>
<li>which （能看到命令的别名，只能看到命令的所在位置）</li>
</ul>
<h3 id="文件搜索命令-find"><a href="#文件搜索命令-find" class="headerlink" title="文件搜索命令 find"></a>文件搜索命令 find</h3><ul>
<li><code>find [搜索范围] [搜索条件]</code><ul>
<li>搜索文件</li>
</ul>
</li>
<li><code>find / -name install.log</code><ul>
<li>避免大范围搜索，会非常耗费系统资源</li>
<li>find 是在系统当中搜索符合条件的文件名。如果需要匹配，使用通配符匹配，通配符是完全匹配</li>
<li>Linux 中的通配符<ul>
<li><ul>
<li>匹配任意内容</li>
</ul>
</li>
<li>?  匹配任意一个字符</li>
<li>[] 匹配任意一个中括号内的字符</li>
</ul>
</li>
</ul>
</li>
<li><code>find /root -iname install.log</code> 不区分大小写</li>
<li><code>find /root -user root</code> 按照所有者搜索</li>
<li><code>find /root -nouser</code> 查找没有所有者的文件</li>
<li><code>find /var/log/ -mtime +10</code> 查找 10 天前修改的文件<ul>
<li>10 10 天当天修改的文件</li>
<li>-10 10 天内修改文件</li>
<li>+10 10 天前修改的文件</li>
<li>atime 文件访问时间</li>
<li>ctime 改变文件属性</li>
<li>mtime 修改文件内容</li>
</ul>
</li>
<li><code>find . -size 25k</code> 查找文件大小是 25 KB 的文件<ul>
<li>25K 等于 25 KB的文件</li>
<li>-25K 小于 25 KB的文件</li>
<li>+25K 大于 25KB 的文件</li>
</ul>
</li>
<li><code>find . -inum 262422</code> 查找 i 节点是 262422 的文件</li>
<li><code>find /etc -size +20k -a -size -50k</code> 查找 /etc/ 目录下，大于 20 KB 并且小于 50 KB 的文件<ul>
<li>-a and 逻辑与，两个条件都满足</li>
<li>-o or 逻辑或，两个条件满足一个即可</li>
</ul>
</li>
<li><code>find /etc -size +20k -a -size -50k -exec ls -lh {} \;</code> 查找 /etc/，大于 20 KB 并且小于 50 KB 的文件，并显示详细信息，-exec/ -ok 命令 {}\; 对搜索结果执行操作</li>
</ul>
<h3 id="字符串搜索命令-grep"><a href="#字符串搜索命令-grep" class="headerlink" title="字符串搜索命令 grep"></a>字符串搜索命令 grep</h3><ul>
<li><code>grep [选项] 字符串 文件名</code> 在文件当中匹配符合条件的字符串<ul>
<li>-i 忽略大小写</li>
<li>-v 排除指定字符串</li>
</ul>
</li>
</ul>
<h3 id="find-命令与-grep-命令的区别"><a href="#find-命令与-grep-命令的区别" class="headerlink" title="find 命令与 grep 命令的区别"></a>find 命令与 grep 命令的区别</h3><p>find 命令：在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配。</p>
<p>grep 命令：在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式时包含匹配。</p>
<h2 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h2><h3 id="帮助命令-man"><a href="#帮助命令-man" class="headerlink" title="帮助命令 man"></a>帮助命令 man</h3><ul>
<li><code>man 命令</code>  获取指定命令的帮助</li>
<li><code>man -f 命令</code> 相当于 <code>whatis 命令</code> 查看命令的帮助级别</li>
<li><code>man -k 命令</code> 相当于 <code>apropos 命令</code> 查看和命令相关的所有帮助</li>
<li>man 的级别<ul>
<li>1 ： 查看命令的帮助</li>
<li>2 ： 查看可被内核调用的函数的帮助</li>
<li>3 ： 查看函数和函数库的帮助</li>
<li>4 ： 查看特殊文件的帮助（主要是 /dev 目录下的文件）</li>
<li>5 ： 查看配置文件的帮助</li>
<li>6 ： 查看游戏的帮助</li>
<li>7 ： 查看其他杂项的帮助</li>
<li>8 ： 查看系统管理员可用命令的帮助</li>
<li>9 ： 查看和内核相关文件的帮助</li>
</ul>
</li>
</ul>
<h3 id="其他帮助命令"><a href="#其他帮助命令" class="headerlink" title="其他帮助命令"></a>其他帮助命令</h3><ul>
<li><code>命令 --help</code> 获取命令选项的帮助<ul>
<li><code>ls --help</code></li>
</ul>
</li>
<li><code>help shell 内部命令</code> 获取 shell 内部命令的帮助<ul>
<li><code>whereis cd</code> 确定是否是 shell 内部命令</li>
<li><code>help cd</code> 获取内部命令帮助</li>
</ul>
</li>
<li><code>info 命令</code><ul>
<li>回车 ： 进入子帮助页面</li>
<li>u ： 进入上层页面</li>
<li>n ： 进入下一个帮助小节</li>
<li>p ： 进入上一个帮助小节</li>
<li>q ： 退出</li>
</ul>
</li>
</ul>
<h2 id="压缩命令"><a href="#压缩命令" class="headerlink" title="压缩命令"></a>压缩命令</h2><ul>
<li>常用的压缩格式：<ul>
<li>.zip</li>
<li>.gz</li>
<li>.bz2</li>
<li>.tar.gz</li>
<li>.tar.bz2</li>
</ul>
</li>
<li>.zip 格式<ul>
<li><code>zip 压缩文件名 源文件</code> 压缩文件</li>
<li><code>zip -r 压缩文件名 源目录</code> 压缩目录</li>
<li><code>unzip 压缩文件</code> 解压 <code>.zip</code> 文件</li>
</ul>
</li>
<li>.gz 格式<ul>
<li><code>gzip 源文件</code> 压缩为 <code>.gz</code> 格式的压缩文件，源文件消失</li>
<li><code>gzip -c 源文件 &gt; 压缩文件</code> 压缩为 <code>.gz</code> 格式的压缩文件，源文件保留</li>
<li><code>gzip -r 目录</code> 压缩目录下所有的子文件，但是不能压缩目录</li>
<li><code>gzip -d 压缩文件</code> 解压文件</li>
<li><code>gunzip 压缩文件</code> 解压文件</li>
</ul>
</li>
<li>.bz2<ul>
<li><code>bzip2 源文件</code> 压缩为 <code>.bz2</code> 格式的压缩文件，不保留源文件</li>
<li><code>bzip2 -k 源文件</code> 压缩为 <code>.bz2</code> 格式的压缩文件，保留源文件</li>
<li><code>bzip2</code> 命令不能压缩目录</li>
</ul>
</li>
<li>tar.gz<ul>
<li><code>tar -cvf 打包文件名 源文件</code><ul>
<li>选项<ul>
<li>-c ： 打包</li>
<li>-v ： 显示过程</li>
<li>-f    ： 指定打包后的文件名</li>
</ul>
</li>
<li>举例：<code>tar -cvf longzls.tar longzls</code></li>
</ul>
</li>
<li><code>tar -xvf 打包文件名</code><ul>
<li>选项<ul>
<li>-x ： 解打包</li>
</ul>
</li>
<li>举例：<code>tar -xvf longzls.tar</code></li>
</ul>
</li>
<li><code>tar -zcvf 压缩包名.tar.gz 源文件</code> 压缩为 <code>.tar.gz</code> 格式的压缩文件</li>
<li><code>tar -zxvf 压缩包名.tar.gz</code> 解压 <code>.tar.gz</code> 格式的文件</li>
<li><code>tar -jcvf 压缩包名.tar.bz2 源文件</code> 压缩为 <code>.tar.bz2</code> 格式的压缩文件</li>
<li><code>tar -jxvf 压缩包名.tar.bz2</code> 解压 <code>.tar.bz2</code> 格式的文件</li>
</ul>
</li>
</ul>
<h2 id="关机重启命令"><a href="#关机重启命令" class="headerlink" title="关机重启命令"></a>关机重启命令</h2><ul>
<li>shutdown 命令<ul>
<li><code>shutdown [选项] 时间</code></li>
<li>选项<ul>
<li>-c ：取消前一个关机命令</li>
<li>-h ：关机（尽可能少用）</li>
<li>-r ：重启</li>
</ul>
</li>
</ul>
</li>
<li>其他关机命令<ul>
<li>halt</li>
<li>poweroff</li>
<li>init 0</li>
</ul>
</li>
<li>其他重启命令<ul>
<li>reboot</li>
<li>init 6</li>
</ul>
</li>
<li>系统运行级别<ul>
<li>0 关机</li>
<li>1 单用户</li>
<li>2 不完全多用户，不含 NFS 服务</li>
<li>3 完全多用户</li>
<li>4 未分配</li>
<li>5 图形界面</li>
<li>6 重启</li>
</ul>
</li>
<li><code>cat /etc/inittab</code> 可以修复系统默认运行级别</li>
<li><code>runlevel</code> 查询系统运行级别</li>
<li><code>logout</code> 退出登录命令</li>
</ul>
<h2 id="挂载命令"><a href="#挂载命令" class="headerlink" title="挂载命令"></a>挂载命令</h2><ul>
<li>查询与自动挂载<ul>
<li><code>mount [-t 文件系统] [-o 特殊选项] 设备 文件名 挂载点</code><ul>
<li>-t 文件系统：加入文件系统类型来指定挂载的类型，可以 ext3、ext4、iso 9660 等文件系统</li>
<li>-o 特殊选项：可以指定挂载的额外选项</li>
</ul>
</li>
<li><code>mount</code> 查询系统中已经挂载的设备</li>
<li><code>mount -a</code> 依据配置文件 /etc/fstab 的内容，自动挂载</li>
</ul>
</li>
<li>光盘的挂载<ul>
<li>挂载光盘<ul>
<li><code>mkdir /mnt/cdrom/</code> 建立挂载点</li>
<li><code>mount -t iso9660 /dev/cdrom /mnt/cdrom/</code> 挂载光盘</li>
<li><code>mount /dev/sr0 /mnt/cdrom/</code></li>
</ul>
</li>
<li>卸载命令<ul>
<li><code>umount 设备文件名或挂载点</code></li>
<li><code>umount /mnt/cdrom</code></li>
</ul>
</li>
</ul>
</li>
<li>U 盘的挂载<ul>
<li><code>fdisk -l</code> 查看存储设备文件名</li>
<li><code>mount -t vfat /dev/sdb1 /mnt/usb/</code></li>
</ul>
</li>
</ul>
<h2 id="用户登录查看命令"><a href="#用户登录查看命令" class="headerlink" title="用户登录查看命令"></a>用户登录查看命令</h2><ul>
<li>w<ul>
<li>USER ：登录的用户名</li>
<li>TTY ：登录终端</li>
<li>FROM ：从哪个 IP 地址登录</li>
<li>LOGIN@ ：登录时间</li>
<li>IDLE ：用户闲置时间</li>
<li>JCPU ：指的是和该终端连接的所有进程占用的时间。这个时间里并不包括过去的后台作业时间，但却包括当前正在运行的后台作业所占用的时间；</li>
<li>PCPU ：是指当前进程所占用的时间；</li>
<li>WHAT ：当前正在运行的命令</li>
</ul>
</li>
<li>who<ul>
<li>用户名</li>
<li>登录终端</li>
<li>登录时间（登录来源 IP 地址）</li>
</ul>
</li>
<li>last（查询当前登录和过去登录的用户信息）<ul>
<li>last 命令默认是读取 /var/log/wtmp 文件数据</li>
<li>命令输出<ul>
<li>用户名</li>
<li>登录终端</li>
<li>登录 IP</li>
<li>登录时间</li>
<li>退出时间（在线时间）</li>
</ul>
</li>
</ul>
</li>
<li>lastlog（查看所有用户的最后一次登录时间）<ul>
<li>lastlog 命令默认是读取 /var/log/lastlog 文件内容</li>
<li>命令输出<ul>
<li>用户名</li>
<li>登录终端</li>
<li>登录 IP</li>
<li>最后一次登录时间</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Shell-基础"><a href="#Shell-基础" class="headerlink" title="Shell 基础"></a>Shell 基础</h2><h3 id="Shell-概述"><a href="#Shell-概述" class="headerlink" title="Shell 概述"></a>Shell 概述</h3><p>Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，<br>用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。</p>
<p>Shell 还是一个功能相当强大的编程语言，易编写，易调试，灵活性比较强。<br>Shell 是解释执行的脚本语言，在 Shell 中可以直接调用 Linux 的系统命令</p>
<p>Shell 的分类</p>
<ul>
<li>Bourne Shell<ul>
<li>sh、ksh、Bash、psh、zsh</li>
</ul>
</li>
<li>C Shell<ul>
<li>csh、tcsh</li>
</ul>
</li>
</ul>
<h3 id="脚本执行方式"><a href="#脚本执行方式" class="headerlink" title="脚本执行方式"></a>脚本执行方式</h3><ul>
<li>echo 输出命令<ul>
<li><code>echo [选项] [输出内容]</code></li>
<li>选项<ul>
<li>-e ：支持反斜线控制的字符转换</li>
</ul>
</li>
<li>字符转换<ul>
<li>\a 输出警告音</li>
<li>\b 退格键，也就是向左删除键</li>
<li>\n 换行符</li>
<li>\r 回车键</li>
<li>\t 制表符</li>
<li>\v 垂直制表符</li>
<li>\0nnn 按照八进制 ASCII 码表输出字符。其中 0 为数字零，nnn 是三位八进制数</li>
<li>\xhh 按照十六进制 ASCII 码表输出字符。其中 hh 是两位十六进制数</li>
</ul>
</li>
<li>使用颜色<ul>
<li>30m=黑色</li>
<li>31m=红色</li>
<li>32m=绿色</li>
<li>33m=黄色</li>
<li>34m=蓝色</li>
<li>35m=洋红</li>
<li>36m=青色</li>
<li>37m=白色</li>
<li>\e[1;31m \e[0m</li>
</ul>
</li>
<li>例子<ul>
<li><code>echo -e &quot;hell\bo&quot;;</code></li>
<li><code>echo -e &quot;\x68\t\x65\t\x6c\n\x6c\t\x6f\t&quot;;</code></li>
<li><code>echo -e &quot;\e[1;31mHello World \e[0m&quot;;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="命令别名与快捷键"><a href="#命令别名与快捷键" class="headerlink" title="命令别名与快捷键"></a>命令别名与快捷键</h3><ul>
<li><code>alias</code> 查看系统中所有的命令别名</li>
<li><code>alias 别名=&#39;原命令&#39;</code> 设定命令别名<ul>
<li>例子：<code>alias vi=&#39;vim&#39;</code></li>
</ul>
</li>
<li><code>vi ~/.bashrc</code> 写入环境变量配置文件</li>
<li><code>unalias 别名</code> 删除别名</li>
<li>命令生效顺序<ul>
<li>第一顺位执行用绝对路径或相对路径执行的命令</li>
<li>第二顺位执行别名</li>
<li>第三顺位执行 Bash 的内部命令</li>
<li>第四顺位执行按照 $PATH 环境变量定义的目录查找顺序找到的第一个命令</li>
</ul>
</li>
<li>常用快捷键<ul>
<li><code>Ctrl + c</code> 强制终止当前命令</li>
<li><code>Ctrl + l</code> 清屏</li>
<li><code>Ctrl + a</code> 光标移动到命令行首</li>
<li><code>Ctrl + e</code> 光标移动到命令行尾</li>
<li><code>Ctrl + u</code> 从光标所在位置删除到行首</li>
<li><code>Ctrl + z</code> 把命令放入后台</li>
<li><code>Ctrl + r</code> 在历史命令中搜索</li>
</ul>
</li>
</ul>
<h3 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h3><ul>
<li><code>history [选项] [历史命令保存文件]</code><ul>
<li>选项<ul>
<li>-c ：清空历史缓存</li>
<li>-w ：把缓存中的历史命令写入历史命令保存文件 <code>~/.bash_history</code></li>
</ul>
</li>
<li>历史命令默认会保存 1000 条，可以在环境变量配置文件 <code>/etc/profile</code> 中的 <code>HISTSIZE</code> 进行修改</li>
<li>历史命令的调用<ul>
<li>使用上、下箭头调用以前的历史命令</li>
<li>使用 <code>!n</code> 重复执行第 n 条历史命令</li>
<li>使用 <code>!!</code> 重复执行上一条命令</li>
<li>使用 <code>!字符</code> 重复执行最后一条以该字符串开头的命令</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h3><p>1.标准输入输出</p>
<table>
<thead>
<tr>
<th>设备</th>
<th>设备文件名</th>
<th>文件描述符</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>键盘</td>
<td>/dev/stdin</td>
<td>0</td>
<td>标准输入</td>
</tr>
<tr>
<td>显示器</td>
<td>/dev/sdtout</td>
<td>1</td>
<td>标准输入</td>
</tr>
<tr>
<td>显示器</td>
<td>/dev/sdterr</td>
<td>2</td>
<td>标准错误输出</td>
</tr>
</tbody>
</table>
<p>2.输出重定向</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>标准输出重定向</td>
<td>命令 &gt; 文件</td>
<td>以覆盖的方式，把命令的正确输出，输出到指定的文件或设备中</td>
</tr>
<tr>
<td>标准输出重定向</td>
<td>命令 &gt;&gt; 文件</td>
<td>以追加的方式，把命令的正确输出，输出到指定的文件或设备中</td>
</tr>
<tr>
<td>标准错误输出重定向</td>
<td>错误命令2&gt;文件</td>
<td>以覆盖的方式，把命令的错误输出，输出到指定的文件或设备中</td>
</tr>
<tr>
<td>标准错误输出重定向</td>
<td>错误命令2&gt;&gt;文件</td>
<td>以追加的方式，把命令的错误输出，输出到指定的文件或设备中</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &gt; 文件 2&gt;&amp;1</td>
<td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &gt;&gt; 文件 2&gt;&amp;1</td>
<td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &amp;&gt;文件</td>
<td>以覆盖的方式，把正确输出和错误输出都保存都同一个文件当中</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &amp;&gt;&gt;文件</td>
<td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令&gt;&gt;文件1 2&gt;&gt;文件2</td>
<td>把正确的输出追加到文件 1 中，把错误的输出追加到文件 2 中</td>
</tr>
</tbody>
</table>
<p>3.输入重定向</p>
<ul>
<li><code>wc [选项] [文件名]</code> 输入重定向<ul>
<li>选项<ul>
<li>-c ：统计字节数</li>
<li>-w ：统计单词数</li>
<li>-i ：统计行数<h3 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h3></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>1.多命令顺序执行</p>
<table>
<thead>
<tr>
<th>多命令执行符</th>
<th>格式</th>
<th>作用</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>;</td>
<td>命令1;命令2</td>
<td>多个命令顺序执行，命令之间没有任何逻辑联系，即使报错也会往下执行</td>
<td>date ; ls ; cd ~; history;</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>命令1&amp;&amp;命令2</td>
<td>逻辑与，当命令 1 正确执行，则命令 2 才会执行，当命令 1 执行不正确，则命令 2 不会执行</td>
<td>ls &amp;&amp; echo yes</td>
</tr>
<tr>
<td>II</td>
<td>命令1 II 命令2</td>
<td>逻辑或，当命令 1 执行不正确，则命令 2 才会执行，当命令 1 正确执行，则命令 2 不会执行</td>
<td>lsls II echo no</td>
</tr>
</tbody>
</table>
<p>2.管道符</p>
<ul>
<li>格式：命令 1 | 命令 2</li>
<li>作用：命令 1 的正确输出作为命令 2 的操作对象</li>
</ul>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>1.通配符</p>
<table>
<thead>
<tr>
<th>通配符</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>?</td>
<td>匹配一个任意字符</td>
</tr>
<tr>
<td>*</td>
<td>匹配 0 个或任意多个任意字符，也就是可以匹配任何内容</td>
</tr>
<tr>
<td>[]</td>
<td>匹配中括号中任意一个字符，例如：[abc] 代表一定匹配一个字符，或是 a,或是 b,或是 c</td>
</tr>
<tr>
<td>[-]</td>
<td>匹配中括号中任意一个字符，- 代表一个范围，例如：[a-z] 代表匹配一个小写字母</td>
</tr>
<tr>
<td>[^]</td>
<td>逻辑非，表示匹配不是中括号内的一个字符，例如：[^0-9] 代表匹配一个不是数字的字符</td>
</tr>
</tbody>
</table>
<p>通配符执行例子</p>
<ul>
<li>存在文件夹<code>dzp</code>,<code>dzp2</code>,<code>dzp3</code>,<code>dzp34</code>,<code>dzpa</code>，<code>dzpbols</code>,<code>dzpcang</code></li>
<li>执行命令 <code>ls dzp</code>，显示文件夹 <code>dzp</code></li>
<li>执行命令 <code>ls dzp?</code>，显示文件夹 <code>dzp2</code>，<code>dzp3</code></li>
<li>执行命令 <code>ls dzp[0-9]</code>，显示文件夹 <code>dzp2</code>，<code>dzp3</code></li>
<li>执行命令 <code>ls dzp[0-9][0-9]</code>，显示文件夹 <code>dzp34</code></li>
<li>执行命令 <code>ls dzp[^0-9]</code>，显示文件夹 <code>dzpa</code></li>
<li>执行命令 <code>ls dzp[^0-9]*</code>，显示文件夹 <code>dzpa</code>，<code>dzpbols</code>，<code>dzpcang</code></li>
</ul>
<p>2.Bash 中其他特殊符号</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘’</td>
<td>单引号。在单引号中所有特殊符号，如 $ 和 ` 都没有特殊含义。</td>
</tr>
<tr>
<td>“”</td>
<td>双引号。在双引号中特殊符号都没有特殊含义，但是 $ 、`、\ 是例外，拥有<em>调用变量值</em>，<em>引用命令</em>，<em>转义符</em>的特殊含义</td>
</tr>
<tr>
<td>``</td>
<td>反引号。反引号包括起来的内容是系统命令，在 Bash 中会先执行它。和 $() 作用一样，不过推荐使用 $()，因为反引号非常容易看错。</td>
</tr>
<tr>
<td>$()</td>
<td>和反引号作用一样，用来引用系统命令</td>
</tr>
<tr>
<td>#</td>
<td>在 Shell 脚本中，# 开头的行代表注释</td>
</tr>
<tr>
<td>$</td>
<td>用于调用变量的值，如需要调用变量 name 的值时，需要用 $name 的方式得到变量的值</td>
</tr>
<tr>
<td>\</td>
<td>转义符，跟在 \ 之后的</td>
</tr>
</tbody>
</table>
<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><h3 id="用户和用户组的概念"><a href="#用户和用户组的概念" class="headerlink" title="用户和用户组的概念"></a>用户和用户组的概念</h3><ul>
<li>用户：使用操作系统的人</li>
<li>用户组：具有相同系统权限的一组用户</li>
<li><code>/etc/group</code> 存储当前系统中所有用户组信息<ul>
<li>Group:x:499:root,luis,daemon</li>
<li>组名称：组密码占位符：组编号：组中用户名列表</li>
</ul>
</li>
<li><code>/etc/gshadow</code> 存储当前系统中用户组的密码信息<ul>
<li>Group:*:    :root,luis</li>
<li>组名称：组密码：组管理者：组中用户名列表</li>
</ul>
</li>
<li><code>/etc/passwd</code> 存储当前系统中所有用户的账号信息<ul>
<li>root:x:0:0:root:/root:/bin/bash</li>
<li>用户名：密码占位符：用户编号：用户组编号：用户注释信息：用户主目录：Shell 类型</li>
</ul>
</li>
<li><code>/etc/shadow</code> 存储当前系统中所有用户的密码信息<ul>
<li>root:$6$tBDREHKV$JfcEQ/hTxaOWI8QKoRPARviOq3etqaE.szqFoqW8/Uxh6nAkCvlQzp8nRhg4kRM4ySRjpsfyS7kxXfa5cOlLa.:17044:0:99999:7:::</li>
<li>用户名:密码:::</li>
</ul>
</li>
</ul>
<h3 id="用户和用户组的基本命令"><a href="#用户和用户组的基本命令" class="headerlink" title="用户和用户组的基本命令"></a>用户和用户组的基本命令</h3><ul>
<li>用户组基本命令<ul>
<li>新增用户组：<code>groupadd 用户组名称</code></li>
<li>新增用户组并指定编号：<code>groupadd -g 数字编号 用户组名称</code></li>
<li>修改用户组名称：<code>groupmod -n 新名称 旧名称</code></li>
<li>修改用户组编号：<code>groupmod -g 数字编号 用户组名称</code></li>
<li>删除用户组：<code>groupdel 用户组名称</code></li>
</ul>
</li>
<li>用户基本命令<ul>
<li>删除用户：<code>userdel 用户名称</code></li>
<li>删除用户并删除个人文件夹：<code>userdel -r 用户名称</code></li>
<li>新增用户并指定用户组：<code>useradd -g 用户组名称 用户名称</code></li>
<li>新增用户并指定用户个人文件夹：<code>useradd -d 目录路径 用户名称</code></li>
<li>修改用户名称：<code>usermod -l 新名称 旧名称</code></li>
<li>修改用户备注信息：<code>usermod -c 备注信息 用户名称</code></li>
<li>修改用户的用户组信息：<code>usermod -g 用户组名称 用户名称</code></li>
<li>指定用户新的个人文件夹：<code>usermod -d 目录路径 用户名称</code></li>
</ul>
</li>
<li>其他命令<ul>
<li>切换用户：<code>su</code></li>
<li>锁定用户：<code>passwd -l 用户名称</code></li>
<li>解锁用户：<code>passwd -u 用户名称</code></li>
<li>无密码登录：<code>passwd -d 用户名称</code></li>
<li>设置组密码：<code>gpasswd 用户组名称</code></li>
<li>显示用户详情:<ul>
<li>显示当前登录用户名：<code>whoami</code></li>
<li>显示用户信息和组信息：<code>id 用户名称</code></li>
<li>显示用户所在的所有组：<code>groups 用户名称</code></li>
</ul>
</li>
<li>设置用户资料：<code>chfn 用户名称</code></li>
<li>新增用户附属组：<code>gpasswd -a 用户名称 用户组名称</code>（在 Linux 当中，一个用户可以属于多个用户组，但只能有一个主要组，其余都是附属组）</li>
<li>删除用户附属组：<code>gpasswd -d 用户名称</code></li>
<li>切换用户附属组：<code>newgrp 用户组名称</code></li>
<li>新增用户指定主要组和附属组：<code>useradd -g 主要组名称 -G 附属组名称</code></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/19/Linux-命令基础/" data-id="cj4i1olr4000x0y4b69ogi7pj" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-MySQL-5-7-版本新特性" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/12/MySQL-5-7-版本新特性/" class="article-date">
  <time datetime="2016-09-12T13:12:40.000Z" itemprop="datePublished">2016-09-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/12/MySQL-5-7-版本新特性/">MySQL 5.7 版本新特性</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="第-1-章-MySQL-服务功能增强"><a href="#第-1-章-MySQL-服务功能增强" class="headerlink" title="第 1 章 MySQL 服务功能增强"></a>第 1 章 MySQL 服务功能增强</h2><h3 id="1-1-初始化方式变更"><a href="#1-1-初始化方式变更" class="headerlink" title="1-1 初始化方式变更"></a>1-1 初始化方式变更</h3><p>MySQL 5.7 之前<br><code>scripts/mysql_install_db \
    --datadir=/data/sql_data \
    --user=mysql --basedir=/home/mysql</code></p>
<p>MySQL 5.7 之后<br><code>bin/mysql --initialize --user = mysql \
    --basedir=/home/mysql \
    --datadir=/home/mysql/data</code></p>
<h3 id="1-3-旧版本支持为表增加计算列演练"><a href="#1-3-旧版本支持为表增加计算列演练" class="headerlink" title="1-3 旧版本支持为表增加计算列演练"></a>1-3 旧版本支持为表增加计算列演练</h3><p>MySQL 5.7 之前，需要增加一个插入触发器和更新触发器来实现计算列的功能，或者是一个视图来实现计算列的功能</p>
<p>MySQL 5.7 之后，在 <code>CREATE TABLE</code> 及 <code>ALTER TABLE</code> 语句中支持增加计算列的方式<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">col_name data_type [GENERATED ALWAYS] AS (expression)</div><div class="line">[VIRTUAL | STORED] [UNIQUE [KEY]] [<span class="keyword">COMMENT</span> <span class="keyword">comment</span>]</div><div class="line">[[<span class="keyword">NOT</span>] <span class="literal">NULL</span>] [[PRIMARY] <span class="keyword">KEY</span>]</div></pre></td></tr></table></figure></p>
<h3 id="1-4-MySQL5-7支持为表增加计算列实际演练"><a href="#1-4-MySQL5-7支持为表增加计算列实际演练" class="headerlink" title="1-4 MySQL5.7支持为表增加计算列实际演练"></a>1-4 MySQL5.7支持为表增加计算列实际演练</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t(<span class="keyword">id</span> <span class="built_in">int</span> AUTO_INCREMENT <span class="keyword">not</span> <span class="literal">null</span>,c1 <span class="built_in">int</span>,c2 <span class="built_in">int</span>,c3 <span class="built_in">int</span> <span class="keyword">as</span> (c1+c2),PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>));</div><div class="line"></div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t(c1,c2) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t;</div><div class="line"></div><div class="line"><span class="keyword">UPDATE</span> t <span class="keyword">set</span> c1 = <span class="number">5</span> <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t;</div></pre></td></tr></table></figure>
<h3 id="1-5-引入JSON列类型及相关函数"><a href="#1-5-引入JSON列类型及相关函数" class="headerlink" title="1-5 引入JSON列类型及相关函数"></a>1-5 引入JSON列类型及相关函数</h3><p>MySQL 5.7 之前</p>
<p>只能在 varchar 或是 text 等字符类型的列中存储 JSON 类型的字符串，并通过程序解析使用 JSON 字符串。</p>
<p>MySQL 5.7 之后</p>
<p>增加了 JSON 列类型及以 JSON 开头的相关处理函数，如 JSON_TYPE(),JSON_OBJECT()，JSON_MERGE() 等。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT JSON_ARRAY(1,2,3,now());</div><div class="line">SELECT JSON_OBJECT(&apos;keyA&apos;,1,&apos;keyB&apos;,2);</div></pre></td></tr></table></figure></p>
<h2 id="第-2-章-Replication-相关增强"><a href="#第-2-章-Replication-相关增强" class="headerlink" title="第 2 章 Replication 相关增强"></a>第 2 章 Replication 相关增强</h2><h3 id="2-1-支持多源复制"><a href="#2-1-支持多源复制" class="headerlink" title="2-1 支持多源复制"></a>2-1 支持多源复制</h3><p>略</p>
<h3 id="2-2-基于库或是逻辑锁的多线程复制"><a href="#2-2-基于库或是逻辑锁的多线程复制" class="headerlink" title="2-2 基于库或是逻辑锁的多线程复制"></a>2-2 基于库或是逻辑锁的多线程复制</h3><p>MySQL 5.7 之前</p>
<p>从 MySQL 5.6 开始支持多线程复制，只不过是对于每一个库一个复制线程。</p>
<p>MySQL 5.7 之后</p>
<p>MySQL 5.7 后对多线程复制功能进行了加强，增加了 <code>slave_paraller_type</code> 参数可以控制并发同步是基于 <code>database</code> 还是 <code>logical_clock</code></p>
<h3 id="2-3-在线变更复制方式"><a href="#2-3-在线变更复制方式" class="headerlink" title="2-3 在线变更复制方式"></a>2-3 在线变更复制方式</h3><p>MySQL 5.7 之前</p>
<p>要把基于日志点的复制方式变为基于 gtid 的复制方式或是把基于 gtid 的复制方式变成基于日志点的复制方式必须要重启 master 的服务器</p>
<p>MySQL 5.7 之后</p>
<p>允许在线变列复制的方式，而不用重启 master 服务器</p>
<h2 id="第-3-章-InnoDB-引擎增强"><a href="#第-3-章-InnoDB-引擎增强" class="headerlink" title="第 3 章 InnoDB 引擎增强"></a>第 3 章 InnoDB 引擎增强</h2><h3 id="3-1-支持缓冲池大小在线变更"><a href="#3-1-支持缓冲池大小在线变更" class="headerlink" title="3-1 支持缓冲池大小在线变更"></a>3-1 支持缓冲池大小在线变更</h3><p>MySQL 5.7 之前</p>
<p>要变更 <code>innodb_buffer_pool</code> 大小必须更改 <code>my.cnf</code> 文件后重启数据库服务器</p>
<p>MySQL 5.7 之后</p>
<p><code>innodb_buffer_pool_size</code> 参数变为动态参数，可以在线调整 <code>innodb</code> 缓存池的大小</p>
<h3 id="3-2-增加-innodb-buffer-pool-导入导出功能"><a href="#3-2-增加-innodb-buffer-pool-导入导出功能" class="headerlink" title="3-2 增加 innodb_buffer_pool 导入导出功能"></a>3-2 增加 <code>innodb_buffer_pool</code> 导入导出功能</h3><p>MySQL 5.7 之后，新增以下参数控制 <code>innodb_buffer_pool</code> 的导入导出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">innodb_buffer_pool_dump_pct</div><div class="line">innodb_buffer_pool_dump_now</div><div class="line">innodb_buffer_pool_dump_at_shutdown</div><div class="line">innodb_buffer_pool_load_at_startup</div><div class="line">innodb_buffer_pool_load_now</div></pre></td></tr></table></figure></p>
<h3 id="3-3-支持为-innodb-表建立表空间"><a href="#3-3-支持为-innodb-表建立表空间" class="headerlink" title="3-3 支持为 innodb 表建立表空间"></a>3-3 支持为 <code>innodb</code> 表建立表空间</h3><p>MySQL 5.7 之前</p>
<p>具有系统表空间及可以为每个表建立一个独立的表空间</p>
<p>MySQL 5.7 之后</p>
<p>支持 <code>CREATE TABLESPACE</code> 语法为一个表或多个表建立共用的表空间</p>
<h2 id="第-4-章-安全及管理方面增强"><a href="#第-4-章-安全及管理方面增强" class="headerlink" title="第 4 章 安全及管理方面增强"></a>第 4 章 安全及管理方面增强</h2><h3 id="4-1-不再支持old-password认证"><a href="#4-1-不再支持old-password认证" class="headerlink" title="4-1 不再支持old_password认证"></a>4-1 不再支持old_password认证</h3><h3 id="4-2-增加账号默认过期时间"><a href="#4-2-增加账号默认过期时间" class="headerlink" title="4-2 增加账号默认过期时间"></a>4-2 增加账号默认过期时间</h3><p><code>show variables like &#39;default_password_lifetime&#39;;</code></p>
<h3 id="4-3-加强了对账号的管理功能"><a href="#4-3-加强了对账号的管理功能" class="headerlink" title="4-3 加强了对账号的管理功能"></a>4-3 加强了对账号的管理功能</h3><h3 id="4-4-增加了-sys-管理数据库"><a href="#4-4-增加了-sys-管理数据库" class="headerlink" title="4-4 增加了 sys 管理数据库"></a>4-4 增加了 sys 管理数据库</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2016/09/12/MySQL-5-7-版本新特性/" data-id="cj4i1olrq001j0y4b3kb72vgj" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Patterns/">Design Patterns</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Pattern/">Pattern</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tooling/">Tooling</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/UML/">UML</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AliCloud/">AliCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Laravel/">Laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Learning/">Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHPStorm/">PHPStorm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pattern/">Pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sublime-Text-3/">Sublime Text 3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swagger/">Swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swoole/">Swoole</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yii/">Yii</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yii2/">Yii2</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/AliCloud/" style="font-size: 11.43px;">AliCloud</a> <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/Javascript/" style="font-size: 11.43px;">Javascript</a> <a href="/tags/Laravel/" style="font-size: 18.57px;">Laravel</a> <a href="/tags/Learning/" style="font-size: 10px;">Learning</a> <a href="/tags/Linux/" style="font-size: 17.14px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 15.71px;">MySQL</a> <a href="/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/tags/PHPStorm/" style="font-size: 11.43px;">PHPStorm</a> <a href="/tags/Pattern/" style="font-size: 12.86px;">Pattern</a> <a href="/tags/Sublime-Text-3/" style="font-size: 10px;">Sublime Text 3</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/Swoole/" style="font-size: 10px;">Swoole</a> <a href="/tags/UML/" style="font-size: 11.43px;">UML</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Yii/" style="font-size: 14.29px;">Yii</a> <a href="/tags/Yii2/" style="font-size: 10px;">Yii2</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/29/「复盘」商品库-v1-0/">「复盘」商品库 v1.0</a>
          </li>
        
          <li>
            <a href="/2017/06/27/使用-Vue-js-2-0-开发后台/">使用 Vue.js 2.0 开发后台</a>
          </li>
        
          <li>
            <a href="/2017/06/05/LNMP-中常用的-Linux-命令/">LNMP 中常用的 Linux 命令</a>
          </li>
        
          <li>
            <a href="/2017/06/02/mysqldumpslow-参数讲解与基础使用/">mysqldumpslow 参数讲解与基础使用</a>
          </li>
        
          <li>
            <a href="/2017/06/01/XHprof-的安装配置与使用分析/">XHProf 的安装配置与使用分析</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Luis Edware<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>