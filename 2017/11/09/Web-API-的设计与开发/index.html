<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Web API 的设计与开发 | 七月十五九月初七</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="什么是 Web API本文中的 Web API 是指「使用 HTTP 协议通过网络调用的 API」，简而言之，Web API 就是一个 Web 系统，通过访问 URI 可以与服务器完成信息交互，或者获得存放在服务器的数据信息等，这样调用者通过程序进行访问后即可机械地使用这些数据。 设计优美的 Web API 的重要性 设计优美的 Web API 易于使用 提升开发效率 减少开发周期   设计优美的">
<meta property="og:type" content="article">
<meta property="og:title" content="Web API 的设计与开发">
<meta property="og:url" content="http://luisedware.github.io/2017/11/09/Web-API-的设计与开发/index.html">
<meta property="og:site_name" content="七月十五九月初七">
<meta property="og:description" content="什么是 Web API本文中的 Web API 是指「使用 HTTP 协议通过网络调用的 API」，简而言之，Web API 就是一个 Web 系统，通过访问 URI 可以与服务器完成信息交互，或者获得存放在服务器的数据信息等，这样调用者通过程序进行访问后即可机械地使用这些数据。 设计优美的 Web API 的重要性 设计优美的 Web API 易于使用 提升开发效率 减少开发周期   设计优美的">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-11-10T01:48:11.564Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Web API 的设计与开发">
<meta name="twitter:description" content="什么是 Web API本文中的 Web API 是指「使用 HTTP 协议通过网络调用的 API」，简而言之，Web API 就是一个 Web 系统，通过访问 URI 可以与服务器完成信息交互，或者获得存放在服务器的数据信息等，这样调用者通过程序进行访问后即可机械地使用这些数据。 设计优美的 Web API 的重要性 设计优美的 Web API 易于使用 提升开发效率 减少开发周期   设计优美的">
  
    <link rel="alternate" href="/atom.xml" title="七月十五九月初七" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">七月十五九月初七</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一两祝你手边多银财，二两祝你方寸永不乱</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://luisedware.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Web-API-的设计与开发" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/09/Web-API-的设计与开发/" class="article-date">
  <time datetime="2017-11-09T12:11:34.000Z" itemprop="datePublished">2017-11-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Web API 的设计与开发
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么是-Web-API"><a href="#什么是-Web-API" class="headerlink" title="什么是 Web API"></a>什么是 Web API</h2><p>本文中的 Web API 是指「使用 HTTP 协议通过网络调用的 API」，简而言之，Web API 就是一个 Web 系统，通过访问 URI 可以与服务器完成信息交互，或者获得存放在服务器的数据信息等，这样调用者通过程序进行访问后即可机械地使用这些数据。</p>
<h2 id="设计优美的-Web-API-的重要性"><a href="#设计优美的-Web-API-的重要性" class="headerlink" title="设计优美的 Web API 的重要性"></a>设计优美的 Web API 的重要性</h2><ul>
<li>设计优美的 Web API 易于使用<ul>
<li>提升开发效率</li>
<li>减少开发周期</li>
</ul>
</li>
<li>设计优美的 Web API 便于更改<ul>
<li>避免更改之后无法使用</li>
<li>尽量不影响正在使用的用户</li>
</ul>
</li>
<li>设计优美的 Web API 健壮性好<ul>
<li>安全可靠，难以破解</li>
<li>考虑 API 特有安全问题</li>
</ul>
</li>
<li>设计优美的 Web API 不怕公之于众<ul>
<li>不怕受到质疑</li>
<li>拥有技术影响</li>
</ul>
</li>
</ul>
<h2 id="如何设计优美的-Web-API"><a href="#如何设计优美的-Web-API" class="headerlink" title="如何设计优美的 Web API"></a>如何设计优美的 Web API</h2><ol>
<li>首先需要决定的是将什么样的信息，通过 API 公开。</li>
<li>其次考虑作为访问目标的端点。</li>
<li>然后考虑交互方式与合适的响应数据格式。</li>
<li>最后还需要考虑安全性以及访问控制等相关内容。</li>
</ol>
<p>两个重要的设计原则，如下所示：</p>
<ul>
<li>设计规范明确的内容必须遵守相关规范。</li>
<li>没有设计规范的内容必须遵守相关事实标准。</li>
</ul>
<h2 id="端点的设计与请求的形式"><a href="#端点的设计与请求的形式" class="headerlink" title="端点的设计与请求的形式"></a>端点的设计与请求的形式</h2><p>本文中的端点是指用于访问 API 的 URI。一般而言，因为 API 将各种不同的功能进行了封装，所以会拥有多个不同的端点。</p>
<p>URI：统一资源标志符，一个用于标识某一互联网资源名称的字符串。</p>
<h4 id="API-端点基本原则"><a href="#API-端点基本原则" class="headerlink" title="API 端点基本原则"></a>API 端点基本原则</h4><p>优秀的 URI 设计，有一个非常重要的原则：容易记忆，URI 包含的功能一目了然。可以把这一条原则细化成多个小原则，如下所示：</p>
<ul>
<li>短小便于输入的 URI<ul>
<li><a href="http://api.example.com/service/api/search" target="_blank" rel="external">http://api.example.com/service/api/search</a></li>
<li><a href="http://api.example.com/serach" target="_blank" rel="external">http://api.example.com/serach</a> √</li>
</ul>
</li>
<li>人可以秒懂的 URI<ul>
<li><a href="http://api.example.com/sv/u/" target="_blank" rel="external">http://api.example.com/sv/u/</a></li>
<li><a href="http://api.example.com/seihin/1" target="_blank" rel="external">http://api.example.com/seihin/1</a></li>
<li><a href="http://api.example.com/productos/1" target="_blank" rel="external">http://api.example.com/productos/1</a></li>
<li><a href="http://api.example.com/products/1" target="_blank" rel="external">http://api.example.com/products/1</a> √</li>
</ul>
</li>
<li>没有大小写混用的 URI<ul>
<li><a href="http://api.example.com/Users/1" target="_blank" rel="external">http://api.example.com/Users/1</a></li>
<li><a href="http://api.example.com/API/getUserName" target="_blank" rel="external">http://api.example.com/API/getUserName</a></li>
<li><a href="http://api.example.com/USERS/1" target="_blank" rel="external">http://api.example.com/USERS/1</a></li>
<li><a href="http://api.example.com/users/1" target="_blank" rel="external">http://api.example.com/users/1</a> √</li>
</ul>
</li>
<li>修改方便的 URI<ul>
<li><a href="http://api.example.com/v1/items/alpha/1" target="_blank" rel="external">http://api.example.com/v1/items/alpha/1</a></li>
<li><a href="http://api.example.com/v1/items/1" target="_blank" rel="external">http://api.example.com/v1/items/1</a> √</li>
</ul>
</li>
<li>不会暴露服务器架构的 URI<ul>
<li><a href="http://api.example.com/cgi-bin/get_user.php?user=100" target="_blank" rel="external">http://api.example.com/cgi-bin/get_user.php?user=100</a></li>
<li><a href="http://api.example.com/v1/users/100" target="_blank" rel="external">http://api.example.com/v1/users/100</a> √</li>
</ul>
</li>
<li>规则统一的 URI<ul>
<li>不统一的 URI<ul>
<li>获取好友信息：<a href="http://api.example.com/friends?id=100" target="_blank" rel="external">http://api.example.com/friends?id=100</a></li>
<li>发送消息：<a href="http://api.example.com/friend/100/message" target="_blank" rel="external">http://api.example.com/friend/100/message</a></li>
</ul>
</li>
<li>统一的 URI<ul>
<li>获取好友信息：<a href="http://api.example.com/friends/100" target="_blank" rel="external">http://api.example.com/friends/100</a> √</li>
<li>发送消息：<a href="http://api.example.com/friends/100/messages" target="_blank" rel="external">http://api.example.com/friends/100/messages</a> √</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="HTTP-方法和-API-端点"><a href="#HTTP-方法和-API-端点" class="headerlink" title="HTTP 方法和 API 端点"></a>HTTP 方法和 API 端点</h4><p>HTTP 方法是进行 HTTP 访问时指定的操作，URI 和 HTTP 方法之间的关系可以认为操作对象和操作方法的关系。<br>如果把 URI 当作 API 的「操作对象 = 资源」，那么 HTTP 方法则表示「进行怎样的操作」。通过用不同的方法访问一个端点，不但可以获取信息，还能修改信息，删除信息。</p>
<p>HTTP 常用方法如下：</p>
<ul>
<li>GET：获取信息</li>
<li>POST：创建信息</li>
<li>PUT：更新覆盖信息</li>
<li>PATCH：更新部分信息</li>
<li>DELETE：删除信息</li>
</ul>
<p>HTML 文档 Form 元素仅仅支持 GET 和 POST 方法，想要用其他 HTTP 方法，实现方式有两种，都是基于 POST 方法进行实现：</p>
<ul>
<li>通过 <code>_method</code> 参数来实现</li>
<li>通过 <code>X-HTTP-Method-Override</code> HTTP Header 实现</li>
</ul>
<h2 id="HTTP-方法和API-端点的设计"><a href="#HTTP-方法和API-端点的设计" class="headerlink" title="HTTP 方法和API 端点的设计"></a>HTTP 方法和API 端点的设计</h2><p>目前成型的 API 设计模式如下：</p>
<ul>
<li>获取用户列表：「GET」<a href="http://api.example.com/v1/users" target="_blank" rel="external">http://api.example.com/v1/users</a></li>
<li>用户注册：「POST」<a href="http://api.example.com/v1/users" target="_blank" rel="external">http://api.example.com/v1/users</a></li>
<li>获取特定用户：「GET」<a href="http://api.example.com/v1/users/:id" target="_blank" rel="external">http://api.example.com/v1/users/:id</a></li>
<li>更新用户信息：「PUT/PATCH」<a href="http://api.example.com/v1/users/:id" target="_blank" rel="external">http://api.example.com/v1/users/:id</a></li>
<li>删除用户信息：「DELETE」<a href="http://api.example.com/v1/users/:id" target="_blank" rel="external">http://api.example.com/v1/users/:id</a></li>
<li>获取当前用户的好友列表：「GET」<a href="http://api.example.com/v1/users/:id/friends" target="_blank" rel="external">http://api.example.com/v1/users/:id/friends</a></li>
<li>添加好友：「POST」<a href="http://api.example.com/v1/users/:id/friends" target="_blank" rel="external">http://api.example.com/v1/users/:id/friends</a></li>
<li>删除好友：「DELETE」<a href="http://api.example.com/v1/users/:id/friends/:id" target="_blank" rel="external">http://api.example.com/v1/users/:id/friends/:id</a></li>
<li>获取指定用户动态：「GET」<a href="http://api.example.com/v1/users/:id/updates" target="_blank" rel="external">http://api.example.com/v1/users/:id/updates</a></li>
<li>获取好友的动态：「GET」<a href="http://api.example.com/v1/users/:id/friends/:id/updates" target="_blank" rel="external">http://api.example.com/v1/users/:id/friends/:id/updates</a></li>
</ul>
<h4 id="获取单个数据"><a href="#获取单个数据" class="headerlink" title="获取单个数据"></a>获取单个数据</h4><p>规范：<code>GET http://api.example.com/v1/users/:id</code></p>
<p>各大公司的实现方式如下所示：</p>
<ul>
<li>Twitter：/statuses/retweets/123456.json</li>
<li>LinkedIn：/companies/123456</li>
<li>Foursquare：/venues/123456</li>
</ul>
<h4 id="获取数据集合"><a href="#获取数据集合" class="headerlink" title="获取数据集合"></a>获取数据集合</h4><p>规范：<code>GET http://api.example.com/v1/users</code></p>
<p>各大公司的实现方式如下所示：</p>
<ul>
<li>Twitter：/statuses/mentions_timeline.json</li>
<li>YouTube：/activities</li>
<li>LinkedIn：/companies</li>
<li>Foursquare：/venuegroups/list</li>
<li>Disqus：/blacklists/list.json</li>
</ul>
<h4 id="端点设计注意事项"><a href="#端点设计注意事项" class="headerlink" title="端点设计注意事项"></a>端点设计注意事项</h4><ul>
<li>使用名词的复数形式<ul>
<li>复数形式表示资源的集合</li>
<li>复数形式与数据库表名一致更加恰当</li>
<li>复数形式表示名词等于资源，HTTP 方法表示动词等于操作，这相当于用最简洁的方式描述对资源进行那些操作</li>
</ul>
</li>
<li>注意所用的单词<ul>
<li>所选用的单词要符合 API 的语义性</li>
</ul>
</li>
<li>不使用空格及需要编码的字符<ul>
<li>不够一目了然</li>
<li>可能无法访问资源</li>
</ul>
</li>
<li>使用连接符来连接多个单词<ul>
<li>方法<ul>
<li>蛇形法：http:/api.example.com/v1/users/1/profile_image</li>
<li>驼峰法：http:/api.example.com/v1/users/1/profileImage</li>
<li>脊柱法：http:/api.example.com/v1/users/1/profile-image</li>
<li>点分法：http:/api.example.com/v1/users/1/profile.image</li>
</ul>
</li>
<li>事实标准<ul>
<li>Twitter：/statuses/user_timeline</li>
<li>YouTube：/guideCategories</li>
<li>Facebook：/me/books.quotes</li>
<li>LinkedIn：/v1/people-search</li>
<li>Bit.ly：/v3/user/popular_earned_by_clicks</li>
<li>Disqus：/api/3.0/applications/listUsage.json</li>
</ul>
</li>
<li>推荐使用连字符；原因是 Google 推荐使用连字符，使用连字符对 SEO 友好；其次 URI 里的主机名（域名）允许使用连字符而禁止使用下划线，且不区分大小写。而且点子符具有特殊含义。<br>因此，为了使用和主机名一致的规则来统一 URI 命名，用连字符连接多个单词最适合不过。</li>
</ul>
</li>
</ul>
<h4 id="搜索与查询参数的设计"><a href="#搜索与查询参数的设计" class="headerlink" title="搜索与查询参数的设计"></a>搜索与查询参数的设计</h4><p>获取数据量和获取位置的查询参数。这两个参数就是俗称的「分页」参数。各大公司的示例如下：</p>
<table>
<thead>
<tr>
<th>在线服务名称</th>
<th>获取数据量</th>
<th>获取相对位置</th>
<th>获取绝对位置</th>
</tr>
</thead>
<tbody>
<tr>
<td>Twitter</td>
<td>count</td>
<td>cursor</td>
<td>max_id</td>
</tr>
<tr>
<td>YouTube</td>
<td>maxResults</td>
<td>pageToken</td>
<td>publishedBefore / publishedAfter</td>
</tr>
<tr>
<td>Flickr</td>
<td>per_page</td>
<td>page</td>
<td>max_upload_date</td>
</tr>
<tr>
<td>LinkedIn</td>
<td>count</td>
<td>start</td>
</tr>
<tr>
<td>Instagram</td>
<td></td>
<td></td>
<td>max_id</td>
</tr>
<tr>
<td>Last.fm</td>
<td>limit</td>
<td>page</td>
</tr>
<tr>
<td>eBay</td>
<td>paginationInput.entriesPerPage</td>
<td>paginationInput.pageNumber</td>
</tr>
<tr>
<td>del.icio.us</td>
<td>count / results</td>
<td>start</td>
</tr>
<tr>
<td>bit.ly</td>
<td>limit</td>
<td>offset</td>
</tr>
<tr>
<td>Tumblr</td>
<td>limit</td>
<td>offset</td>
<td>since_id</td>
</tr>
<tr>
<td>Disqus</td>
<td>limit</td>
<td>offset</td>
</tr>
<tr>
<td>Github</td>
<td>per_page</td>
<td>page</td>
</tr>
<tr>
<td>Pocket</td>
<td>limit</td>
<td>offset</td>
</tr>
<tr>
<td>Etsy</td>
<td>limit</td>
<td>offset</td>
</tr>
</tbody>
</table>
<p>从中可以看出一般在线服务会用 limit、count 和 per_page 来表示获取的数据量，而使用 page、offset 和 cursor 来表示获取数据的位置。</p>
<p>使用相对位置存在的问题</p>
<ul>
<li>在 MySQL 等 RDB 中，当使用 offset 或 limit 来获取指定的数据位置时，随着数据量的增加，响应速度会不断下降。</li>
<li>如果数据更新的频率很高，会导致当前获取的数据出现一定的偏差。</li>
</ul>
<p>用于过滤的参数。在 API 里设置过滤条件，以此来实现搜索用户的功能。各个在线服务实现如下：</p>
<ul>
<li>LinkedIn：<a href="http://api.linkedin.com/v1/people-search?first-name=Clair" target="_blank" rel="external">http://api.linkedin.com/v1/people-search?first-name=Clair</a></li>
<li>Tumblr：<a href="http://api.tumblr.com/v2/blog/pitchersandpoets.tumblr.com/posts?tag=new+york+yankees" target="_blank" rel="external">http://api.tumblr.com/v2/blog/pitchersandpoets.tumblr.com/posts?tag=new+york+yankees</a></li>
<li>Instagram：<a href="http://api.instagram.com/v1/users/search?q=jack" target="_blank" rel="external">http://api.instagram.com/v1/users/search?q=jack</a></li>
<li>Foursquare：<a href="http://api.foursquare.com/v2/venues/search?q=apple&amp;categoryId=asad132421&amp;ll=44.3,37.2&amp;radius=800" target="_blank" rel="external">http://api.foursquare.com/v2/venues/search?q=apple&amp;categoryId=asad132421&amp;ll=44.3,37.2&amp;radius=800</a></li>
</ul>
<h4 id="查询参数和路径的使用区别"><a href="#查询参数和路径的使用区别" class="headerlink" title="查询参数和路径的使用区别"></a>查询参数和路径的使用区别</h4><p>在设计 URI 时，必须决定是把客户端指定的特定参数放在查询参数里还是路径里，决策的依据有以下两点：</p>
<ul>
<li>是否是表示唯一资源所需的信息</li>
<li>是否可以省略</li>
</ul>
<p>首先第一点提到了资源是否唯一，这主要基于「URI 表示资源」这一根本思想。像用户 ID 能够表示资源的唯一性，将用户 ID 放在路径中就比较合适。然后是否可以省略，比如罗列、搜索时用到的 offset、limit 或 page 参数，如果忽略，很多情况下都会启用默认值<br>而不会出错，所以放在查询参数里更为合适。</p>
<h4 id="登录与-OAuth-2-0"><a href="#登录与-OAuth-2-0" class="headerlink" title="登录与 OAuth 2.0"></a>登录与 OAuth 2.0</h4><p>OAuth 一般用于面向第三方大范围公开的 API 中的认证工作。</p>
<p>OAuth 2.0 的认证流程（Grant Type）有：</p>
<ul>
<li>Authorization Code</li>
<li>Implicit</li>
<li>Resource Owner Password Credentials</li>
<li>Client Credentials</li>
</ul>
<p>OAuth 的端点示例</p>
<ul>
<li>RFC 6749: /token</li>
<li>Twitter: /oauth2/token</li>
<li>Dropbox: /oauth2/authorize</li>
<li>Fackbook: /oauth/access_token</li>
<li>google: /o/oauth2/token</li>
<li>github: /login/oauth/access_token</li>
<li>instagram: /oauth/authorize</li>
<li>tumblr: /oauth/access_token</li>
</ul>
<p>当正确的信息送达服务器端后，服务器端便会返回如下 JSON 格式的响应信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	&quot;access_token&quot;: &quot;令牌&quot;,</div><div class="line">	&quot;token_type&quot;: &quot;bearer&quot;,</div><div class="line">	&quot;expires_in&quot;: 过期时间,</div><div class="line">	&quot;refresh_token&quot;: &quot;刷新令牌凭证&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>token_type 的 bearer 是 RFC 6750 定义的 OAuth 2.0 所用的 token 类型。根据 RFC 6750 的定义，<br>客户端有 3 种方式将 bearer token 信息发送给服务器。</p>
<p>第一种，将 token 信息添加到请求信息的首部时，客户端要用到 Authorization 首部，并按如下方式指定 token 的内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">GET /v1/users HTTP / 1.1</div><div class="line">Host: api.example.com</div><div class="line">Authorization: Bearer lkj123hjkasd879asdiuoqwe7a</div></pre></td></tr></table></figure></p>
<p>第二种，将 token 信息添加到请求体时，则需要将请求消息里的 Content-Type 设定为 application/x-www-form-urlencoded，<br>并用 access_token 来命名消息体里的参数，然后附加上 token 信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">POST /v1/users HTTP / 1.1</div><div class="line">Host: api.example.com</div><div class="line">Content-type: application/x-www-form-urlencoded</div><div class="line"></div><div class="line">access_token=lkj123hjkasd879asdiuoqwe7a</div></pre></td></tr></table></figure></p>
<p>第三种，以查询参数的形式添加 token 参数时，可以在名为 access_token 的查询参数后指定 token 信息发送给服务器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">GET /v1/users?access_token=lkj123hjkasd879asdiuoqwe7a</div><div class="line">Host: server.example.com</div></pre></td></tr></table></figure></p>
<p>自身信息的别名</p>
<table>
<thead>
<tr>
<th>在线服务</th>
<th>用于表示自身信息的关键字</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>Instagram</td>
<td>self</td>
<td>/users/self/media/liked</td>
</tr>
<tr>
<td>Etsy</td>
<td><code>__SELF__</code></td>
<td>/users/<code>__SELF__</code>/favorites/listings/12345?method=DELETE</td>
</tr>
<tr>
<td>LikedIn</td>
<td>~</td>
<td>/people/~</td>
</tr>
<tr>
<td>Reddit</td>
<td>me</td>
<td>/me</td>
</tr>
<tr>
<td>Tumblr</td>
<td>user</td>
<td>/user/info</td>
</tr>
<tr>
<td>Google Calendar</td>
<td>me</td>
<td>/users/me/calendarList</td>
</tr>
<tr>
<td>Xing</td>
<td>me</td>
<td>/users/me</td>
</tr>
</tbody>
</table>
<p>通过这样设计端点，开发时需要输出哪个用户的信息就必须从认证信息中获取，这就必然会导致自身信息的处理和获取其他用户信息的处理要分开进行。<br>可以更容易地防止误将其他用户的个人信息对外公开的 BUG 发生。</p>
<h4 id="主机名和端点的共有部分"><a href="#主机名和端点的共有部分" class="headerlink" title="主机名和端点的共有部分"></a>主机名和端点的共有部分</h4><p>完整的端点是类似于 <a href="https://api.example.com/v1/users" target="_blank" rel="external">https://api.example.com/v1/users</a> 这样的 HTTP 的 URI 信息。<a href="https://api.example.com/v1/" target="_blank" rel="external">https://api.example.com/v1/</a> 是 API 的共有部分，<br>对这部分内容的设计也有必要进行一番考量。</p>
<table>
<thead>
<tr>
<th>在线服务</th>
<th>端点的共有部分</th>
</tr>
</thead>
<tbody>
<tr>
<td>Twitter</td>
<td>api.twitter.com/1.1</td>
</tr>
<tr>
<td>Foursquare</td>
<td>api.foursquare.com/v2</td>
</tr>
<tr>
<td>Tumblr</td>
<td>api.tumblr.com/v2</td>
</tr>
<tr>
<td>Github</td>
<td>api.github.com</td>
</tr>
<tr>
<td>LinkedIn</td>
<td>api.linkedin.com/v1</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://luisedware.github.io/2017/11/09/Web-API-的设计与开发/" data-id="cj9t8tyie0028i24bk9w9ein0" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2017/11/05/日常开发常用命令/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">日常开发常用命令</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Patterns/">Design Patterns</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Pattern/">Pattern</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tooling/">Tooling</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/UML/">UML</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AliCloud/">AliCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Laravel/">Laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Learning/">Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHPStorm/">PHPStorm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pattern/">Pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming-Language/">Programming Language</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sublime-Text-3/">Sublime Text 3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swagger/">Swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swoole/">Swoole</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yii/">Yii</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Yii2/">Yii2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-js/">vue.js</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/AliCloud/" style="font-size: 11.43px;">AliCloud</a> <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/Javascript/" style="font-size: 11.43px;">Javascript</a> <a href="/tags/Laravel/" style="font-size: 18.57px;">Laravel</a> <a href="/tags/Learning/" style="font-size: 10px;">Learning</a> <a href="/tags/Linux/" style="font-size: 17.14px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 15.71px;">MySQL</a> <a href="/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/tags/PHPStorm/" style="font-size: 11.43px;">PHPStorm</a> <a href="/tags/Pattern/" style="font-size: 12.86px;">Pattern</a> <a href="/tags/Programming-Language/" style="font-size: 11.43px;">Programming Language</a> <a href="/tags/Sublime-Text-3/" style="font-size: 10px;">Sublime Text 3</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/Swoole/" style="font-size: 10px;">Swoole</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/UML/" style="font-size: 11.43px;">UML</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Yii/" style="font-size: 14.29px;">Yii</a> <a href="/tags/Yii2/" style="font-size: 10px;">Yii2</a> <a href="/tags/vue-js/" style="font-size: 10px;">vue.js</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/09/Web-API-的设计与开发/">Web API 的设计与开发</a>
          </li>
        
          <li>
            <a href="/2017/11/05/日常开发常用命令/">日常开发常用命令</a>
          </li>
        
          <li>
            <a href="/2017/11/01/刻意练习/">刻意练习</a>
          </li>
        
          <li>
            <a href="/2017/10/24/高性能的-PHP-API-接口开发/">高性能的 PHP API 接口开发</a>
          </li>
        
          <li>
            <a href="/2017/09/04/Vue-js-2-X-实践/">Vue.js 2.X 实践</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Luis Edware<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>